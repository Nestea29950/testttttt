(self.webpackChunkstrapi_sqlite=self.webpackChunkstrapi_sqlite||[]).push([[5162],{4753:function(e,t,a){var r;e.exports=(r=a(53547),function(e){var t={};function a(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,a),n.l=!0,n.exports}return a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=145)}({0:function(e,t){e.exports=r},145:function(e,t,a){"use strict";a.r(t);var r=a(0);function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}t.default=function(e){return r.createElement("svg",n({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r.createElement("path",{d:"M4 20.252V3.748a1 1 0 011.507-.862l14.028 8.252a1 1 0 010 1.724L5.507 21.113A1 1 0 014 20.252z",fill:"#212134"}))}}}))},53830:function(e,t,a){"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(53547)),l=r(a(45697)),u=a(46458),d=a(43499),s=r(a(11700));const o=e=>{let{disabledEvents:t,name:a,events:r,inputValue:l,handleChange:o,handleChangeAll:i}=e;const c=r.filter((e=>!t.includes(e))),f=l.length===c.length,g=l.length>0;return n.default.createElement("tr",null,n.default.createElement("td",null,n.default.createElement(d.Checkbox,{indeterminate:g&&!f,"aria-label":"Select all entries",name:a,onChange:e=>{let{target:{name:t}}=e;i({target:{name:t,value:!f}})},value:f},(0,s.default)(a))),r.map((e=>n.default.createElement("td",{key:e},n.default.createElement(u.BaseCheckbox,{disabled:t.includes(e),"aria-label":e,name:e,value:l.includes(e),onValueChange:t=>o({target:{name:e,value:t}})})))))};o.defaultProps={disabledEvents:[],events:[],inputValue:[],handleChange:()=>{},handleChangeAll:()=>{}},o.propTypes={disabledEvents:l.default.array,events:l.default.array,inputValue:l.default.array,handleChange:l.default.func,handleChangeAll:l.default.func,name:l.default.string.isRequired};var i=o;t.default=i},43082:function(e,t,a){"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(53547)),l=r(a(45697)),u=a(16572),d=a(9524),s=a(33483),o=a(80831),i=a(97132),c=r(a(78384)),f=r(a(53830)),g=r(a(8590));const p=c.default.table.withConfig({displayName:"EventInput__StyledTable",componentId:"sc-1sadnz3-0"})(["td{height:","rem;width:10%;vertical-align:middle;text-align:center;}tbody tr:nth-child(odd){background:",";}tbody tr td:first-child{padding-left:",";}"],3.25,(e=>{let{theme:t}=e;return t.colors.neutral100}),(e=>{let{theme:t}=e;return t.spaces[7]})),m={headers:{default:["Settings.webhooks.events.create","Settings.webhooks.events.update","app.utils.delete"],draftAndPublish:["Settings.webhooks.events.create","Settings.webhooks.events.update","app.utils.delete","app.utils.publish","app.utils.unpublish"]},events:{default:{entry:["entry.create","entry.update","entry.delete"],media:["media.create","media.update","media.delete"]},draftAndPublish:{entry:["entry.create","entry.update","entry.delete","entry.publish","entry.unpublish"],media:["media.create","media.update","media.delete"]}}},v=e=>{let{isDraftAndPublish:t}=e;const a=t?m.headers.draftAndPublish:m.headers.default,r=t?m.events.draftAndPublish:m.events.default,{formatMessage:l}=(0,i.useIntl)(),{values:c,handleChange:v}=(0,o.useFormikContext)(),h="events",b=c.events,y=[],E=(0,g.default)(b),k=e=>{let{target:{name:t,value:a}}=e,r=new Set(b);a?r.add(t):r.delete(t),v({target:{name:h,value:Array.from(r)}})},w=e=>{let{target:{name:t,value:a}}=e,n=new Set(b);a?r[t].forEach((e=>{y.includes(e)||n.add(e)})):r[t].forEach((e=>n.delete(e))),v({target:{name:h,value:Array.from(n)}})};return n.default.createElement(d.Stack,{spacing:1},n.default.createElement(u.FieldLabel,null,l({id:"Settings.webhooks.form.events",defaultMessage:"Events"})),n.default.createElement(p,null,n.default.createElement("thead",null,n.default.createElement("tr",null,n.default.createElement("td",null),a.map((e=>"app.utils.publish"===e||"app.utils.unpublish"===e?n.default.createElement("td",{key:e,title:l({id:"Settings.webhooks.event.publish-tooltip",defaultMessage:"This event only exists for contents with Draft/Publish system enabled"})},n.default.createElement(s.Typography,{variant:"sigma",textColor:"neutral600"},l({id:e,defaultMessage:e}))):n.default.createElement("td",{key:e},n.default.createElement(s.Typography,{variant:"sigma",textColor:"neutral600"},l({id:e,defaultMessage:e}))))))),n.default.createElement("tbody",null,Object.keys(r).map((e=>n.default.createElement(f.default,{disabledEvents:y,key:e,name:e,events:r[e],inputValue:E[e],handleChange:k,handleChangeAll:w}))))))};v.propTypes={isDraftAndPublish:l.default.bool.isRequired};var h=v;t.default=h},8590:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=e=>e.reduce(((e,t)=>{const a=t.split(".")[0];return e[a]||(e[a]=[]),e[a].push(t),e}),{});t.default=a},46148:function(e,t,a){"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(67154)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=o(t);if(a&&a.has(e))return a.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=n?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(r,l,u):r[l]=e[l]}r.default=e,a&&a.set(e,r);return r}(a(53547)),u=r(a(45697)),d=a(88252),s=r(a(92641));function o(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(o=function(e){return e?a:t})(e)}const i=e=>{let{name:t,onChange:a,value:r,...u}=e;const[o,i]=(0,l.useState)(r?[...s.default,r]:s.default);return l.default.createElement(d.CreatableCombobox,(0,n.default)({},u,{onChange:e=>{a({target:{name:t,value:e}})},onCreateOption:e=>{i((t=>[...t,e])),a({target:{name:t,value:e}})},placeholder:"",value:r}),o.map((e=>l.default.createElement(d.ComboboxOption,{value:e,key:e},e))))};i.defaultProps={value:void 0},i.propTypes={name:u.default.string.isRequired,onChange:u.default.func.isRequired,value:u.default.string};var c=i;t.default=c},68091:function(e,t,a){"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(53547)),l=a(68547),u=r(a(89326)),d=a(94117),s=a(16572),o=a(39272),i=a(40264),c=a(9524),f=a(99136),g=a(82212),p=a(80831),m=a(97132),v=r(a(46148));var h=()=>{const{formatMessage:e}=(0,m.useIntl)(),{values:t,errors:a}=(0,p.useFormikContext)();return n.default.createElement(c.Stack,{spacing:1},n.default.createElement(s.FieldLabel,null,e({id:"Settings.webhooks.form.headers",defaultMessage:"Headers"})),n.default.createElement(d.Box,{padding:8,background:"neutral100",hasRadius:!0},n.default.createElement(p.FieldArray,{validateOnChange:!1,name:"headers",render:r=>{var s;let{push:c,remove:m}=r;return n.default.createElement(o.Grid,{gap:4},null===(s=t.headers)||void 0===s?void 0:s.map(((r,u)=>{var s,c,g,h,b,y,E,k,w,M;return n.default.createElement(n.default.Fragment,{key:u},n.default.createElement(o.GridItem,{col:6},n.default.createElement(p.Field,{as:v.default,name:`headers.${u}.key`,"aria-label":`row ${u+1} key`,label:e({id:"Settings.webhooks.key",defaultMessage:"Key"}),error:(null===(s=a.headers)||void 0===s||null===(c=s[u])||void 0===c?void 0:c.key)&&e({id:null===(g=a.headers[u])||void 0===g?void 0:g.key,defaultMessage:null===(h=a.headers[u])||void 0===h?void 0:h.key})})),n.default.createElement(o.GridItem,{col:6},n.default.createElement(i.Flex,{alignItems:"flex-end"},n.default.createElement(d.Box,{style:{flex:1}},n.default.createElement(p.Field,{as:f.TextInput,"aria-label":`row ${u+1} value`,label:e({id:"Settings.webhooks.value",defaultMessage:"Value"}),name:`headers.${u}.value`,error:(null===(b=a.headers)||void 0===b||null===(y=b[u])||void 0===y?void 0:y.value)&&e({id:null===(E=a.headers[u])||void 0===E?void 0:E.value,defaultMessage:null===(k=a.headers[u])||void 0===k?void 0:k.value})})),n.default.createElement(i.Flex,{paddingLeft:2,style:{alignSelf:"center"},paddingTop:null!==(w=a.headers)&&void 0!==w&&null!==(M=w[u])&&void 0!==M&&M.value?0:5},n.default.createElement(l.RemoveRoundedButton,{onClick:()=>1!==t.headers.length&&m(u),label:e({id:"Settings.webhooks.headers.remove",defaultMessage:"Remove header row {number}"},{number:u+1})})))))})),n.default.createElement(o.GridItem,{col:12},n.default.createElement(g.TextButton,{type:"button",onClick:()=>{c({key:"",value:""})},startIcon:n.default.createElement(u.default,null)},e({id:"Settings.webhooks.create.header",defaultMessage:"Create new header"}))))}})))};t.default=h},92641:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=["A-IM","Accept","Accept-Charset","Accept-Encoding","Accept-Language","Accept-Datetime","Access-Control-Request-Method","Access-Control-Request-Headers","Authorization","Cache-Control","Connection","Content-Length","Content-Type","Cookie","Date","Expect","Forwarded","From","Host","If-Match","If-Modified-Since","If-None-Match","If-Range","If-Unmodified-Since","Max-Forwards","Origin","Pragma","Proxy-Authorization","Range","Referer","TE","User-Agent","Upgrade","Via","Warning"];t.default=a},12118:function(e,t,a){"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(53547)),l=r(a(45697)),u=a(97132),d=r(a(78384)),s=a(68547),o=r(a(22754)),i=r(a(7228)),c=r(a(79386)),f=a(94117),g=a(40264),p=a(33483),m=a(9524),v=a(39272);const h=d.default.svg.withConfig({displayName:"TriggerContainer__Icon",componentId:"sc-3cghkc-0"})((e=>{let{theme:t,color:a}=e;return`\n  width: 0.75rem;\n  height: 0.75rem;\n\n  path {\n    fill: ${t.colors[a]};\n  }\n`})),b=e=>{let{isPending:t,statusCode:a}=e;const{formatMessage:r}=(0,u.useIntl)();return t?n.default.createElement(m.Stack,{horizontal:!0,spacing:2,style:{alignItems:"center"}},n.default.createElement(h,{as:c.default}),n.default.createElement(p.Typography,null,r({id:"Settings.webhooks.trigger.pending",defaultMessage:"pending"}))):a>=200&&a<300?n.default.createElement(m.Stack,{horizontal:!0,spacing:2,style:{alignItems:"center"}},n.default.createElement(h,{as:o.default,color:"success700"}),n.default.createElement(p.Typography,null,r({id:"Settings.webhooks.trigger.success",defaultMessage:"success"}))):a>=300?n.default.createElement(m.Stack,{horizontal:!0,spacing:2,style:{alignItems:"center"}},n.default.createElement(h,{as:i.default,color:"danger700"}),n.default.createElement(p.Typography,null,r({id:"Settings.error",defaultMessage:"error"})," ",a)):null};b.propTypes={isPending:l.default.bool.isRequired,statusCode:l.default.number},b.defaultProps={statusCode:void 0};const y=e=>{let{statusCode:t,message:a}=e;const{formatMessage:r}=(0,u.useIntl)();return t>=200&&t<300?n.default.createElement(g.Flex,{justifyContent:"flex-end"},n.default.createElement(p.Typography,{textColor:"neutral600",ellipsis:!0},r({id:"Settings.webhooks.trigger.success.label",defaultMessage:"Trigger succeeded"}))):t>=300?n.default.createElement(g.Flex,{justifyContent:"flex-end"},n.default.createElement(g.Flex,{maxWidth:(0,s.pxToRem)(250),justifyContent:"flex-end",title:a},n.default.createElement(p.Typography,{ellipsis:!0,textColor:"neutral600"},a))):null};y.propTypes={statusCode:l.default.number,message:l.default.string},y.defaultProps={statusCode:void 0,message:void 0};const E=e=>{let{onCancel:t}=e;const{formatMessage:a}=(0,u.useIntl)();return n.default.createElement(g.Flex,{justifyContent:"flex-end"},n.default.createElement("button",{onClick:t,type:"button"},n.default.createElement(m.Stack,{horizontal:!0,spacing:2,style:{alignItems:"center"}},n.default.createElement(p.Typography,{textColor:"neutral400"},a({id:"Settings.webhooks.trigger.cancel",defaultMessage:"cancel"})),n.default.createElement(h,{as:i.default,color:"neutral400"}))))};E.propTypes={onCancel:l.default.func.isRequired};const k=e=>{let{isPending:t,onCancel:a,response:r}=e;const{statusCode:l,message:d}=r,{formatMessage:s}=(0,u.useIntl)();return n.default.createElement(f.Box,{background:"neutral0",padding:5,shadow:"filterShadow",hasRadius:!0},n.default.createElement(v.Grid,{gap:4,style:{alignItems:"center"}},n.default.createElement(v.GridItem,{col:3},n.default.createElement(p.Typography,null,s({id:"Settings.webhooks.trigger.test",defaultMessage:"Test-trigger"}))),n.default.createElement(v.GridItem,{col:3},n.default.createElement(b,{isPending:t,statusCode:l})),n.default.createElement(v.GridItem,{col:6},t?n.default.createElement(E,{onCancel:a}):n.default.createElement(y,{statusCode:l,message:d}))))};k.defaultProps={isPending:!1,onCancel:()=>{},response:{}},k.propTypes={isPending:l.default.bool,onCancel:l.default.func,response:l.default.object};var w=k;t.default=w},93320:function(e,t,a){"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=M(t);if(a&&a.has(e))return a.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=n?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(r,l,u):r[l]=e[l]}r.default=e,a&&a.set(e,r);return r}(a(53547)),l=r(a(45697)),u=a(68547),d=r(a(87760)),s=r(a(22754)),o=r(a(4753)),i=a(35395),c=a(94117),f=a(64459),g=a(56156),p=a(9524),m=a(99136),v=a(39272),h=a(80831),b=a(97132),y=r(a(43082)),E=r(a(68091)),k=r(a(12118)),w=r(a(65701));function M(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(M=function(e){return e?a:t})(e)}const C=e=>{let{handleSubmit:t,data:a,triggerWebhook:r,isCreating:l,isTriggering:M,triggerResponse:C,isDraftAndPublishEvents:P}=e;const{formatMessage:O}=(0,b.useIntl)(),[j,S]=(0,n.useState)(!1);return n.default.createElement(h.Formik,{onSubmit:t,initialValues:{name:(null===a||void 0===a?void 0:a.name)||"",url:(null===a||void 0===a?void 0:a.url)||"",headers:Object.keys((null===a||void 0===a?void 0:a.headers)||[]).length?Object.entries(a.headers).map((e=>{let[t,a]=e;return{key:t,value:a}})):[{key:"",value:""}],events:(null===a||void 0===a?void 0:a.events)||[]},validationSchema:w.default,validateOnChange:!1,validateOnBlur:!1},(e=>{let{handleSubmit:t,errors:b}=e;return n.default.createElement(u.Form,{noValidate:!0},n.default.createElement(i.HeaderLayout,{primaryAction:n.default.createElement(p.Stack,{horizontal:!0,spacing:2},n.default.createElement(f.Button,{onClick:()=>{r(),S(!0)},variant:"tertiary",startIcon:n.default.createElement(o.default,null),disabled:l||M,size:"L"},O({id:"Settings.webhooks.trigger",defaultMessage:"Trigger"})),n.default.createElement(f.Button,{startIcon:n.default.createElement(s.default,null),onClick:t,type:"submit",size:"L"},O({id:"global.save",defaultMessage:"Save"}))),title:l?O({id:"Settings.webhooks.create",defaultMessage:"Create a webhook"}):null===a||void 0===a?void 0:a.name,navigationAction:n.default.createElement(g.Link,{startIcon:n.default.createElement(d.default,null),to:"/settings/webhooks"},O({id:"global.back",defaultMessage:"Back"}))}),n.default.createElement(i.ContentLayout,null,n.default.createElement(p.Stack,{spacing:4},j&&n.default.createElement("div",{className:"trigger-wrapper"},n.default.createElement(k.default,{isPending:M,response:C,onCancel:()=>S(!1)})),n.default.createElement(c.Box,{background:"neutral0",padding:8,shadow:"filterShadow",hasRadius:!0},n.default.createElement(p.Stack,{spacing:6},n.default.createElement(v.Grid,{gap:6},n.default.createElement(v.GridItem,{col:6},n.default.createElement(h.Field,{as:m.TextInput,name:"name",error:b.name&&O({id:b.name}),label:O({id:"global.name",defaultMessage:"Name"}),required:!0})),n.default.createElement(v.GridItem,{col:12},n.default.createElement(h.Field,{as:m.TextInput,name:"url",error:b.url&&O({id:b.url}),label:O({id:"Settings.roles.form.input.url",defaultMessage:"Url"}),required:!0}))),n.default.createElement(E.default,null),n.default.createElement(y.default,{isDraftAndPublish:P}))))))}))};C.propTypes={data:l.default.object,handleSubmit:l.default.func.isRequired,triggerWebhook:l.default.func.isRequired,isCreating:l.default.bool.isRequired,isDraftAndPublishEvents:l.default.bool.isRequired,isTriggering:l.default.bool.isRequired,triggerResponse:l.default.object},C.defaultProps={data:void 0,triggerResponse:void 0};var P=C;t.default=P},90579:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URL_REGEX=t.NAME_REGEX=void 0;const a=new RegExp("(^$)|(^[A-Za-z][_0-9A-Za-z ]*$)");t.NAME_REGEX=a;const r=new RegExp("(^$)|((https?://.*)(d*)/?(.*))");t.URL_REGEX=r},65701:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=u(t);if(a&&a.has(e))return a.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var d=n?Object.getOwnPropertyDescriptor(e,l):null;d&&(d.get||d.set)?Object.defineProperty(r,l,d):r[l]=e[l]}r.default=e,a&&a.set(e,r);return r}(a(53209)),n=a(68547),l=a(90579);function u(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(u=function(e){return e?a:t})(e)}var d=r.object().shape({name:r.string(n.translatedErrors.string).required(n.translatedErrors.required).matches(l.NAME_REGEX,n.translatedErrors.regex),url:r.string(n.translatedErrors.string).required(n.translatedErrors.required).matches(l.URL_REGEX,n.translatedErrors.regex),headers:r.lazy((e=>{let t=r.array();if(1===e.length){const{key:a,value:r}=e[0];if(!a&&!r)return t}return t.of(r.object().shape({key:r.string().required(n.translatedErrors.required),value:r.string().required(n.translatedErrors.required)}))})),events:r.array()});t.default=d},92853:function(e,t,a){"use strict";var r=a(25108),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=p(t);if(a&&a.has(e))return a.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=n?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(r,l,u):r[l]=e[l]}r.default=e,a&&a.set(e,r);return r}(a(53547)),u=a(68547),d=a(80117),s=a(23724),o=a(39711),i=a(63376),c=a(53777),f=n(a(93320)),g=n(a(14968));function p(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(p=function(e){return e?a:t})(e)}var m=()=>{const{params:{id:e}}=(0,o.useRouteMatch)("/settings/webhooks/:id"),{replace:t}=(0,o.useHistory)(),{lockApp:a,unlockApp:n}=(0,u.useOverlayBlocker)(),p=(0,u.useNotification)(),m=(0,s.useQueryClient)(),{isLoading:v,collectionTypes:h}=(0,i.useModels)(),b="create"===e,y=(0,l.useCallback)((async e=>{const[t,{data:a}]=await(0,u.to)((0,u.request)(`/admin/webhooks/${e}`,{method:"GET"}));return t?(p({type:"warning",message:{id:"notification.error"}}),null):a}),[p]),{isLoading:E,data:k}=(0,s.useQuery)(["get-webhook",e],(()=>y(e)),{enabled:!b}),{isLoading:w,data:M,isIdle:C,mutate:P}=(0,s.useMutation)((()=>c.axiosInstance.post(`/admin/webhooks/${e}/trigger`))),O=(0,s.useMutation)((e=>(0,u.request)("/admin/webhooks",{method:"POST",body:e}))),j=(0,s.useMutation)((e=>{let{id:t,body:a}=e;return(0,u.request)(`/admin/webhooks/${t}`,{method:"PUT",body:a})})),S=(0,l.useMemo)((()=>h.some((e=>!0===e.options.draftAndPublish))),[h]);return E||v?l.default.createElement(u.LoadingIndicatorPage,null):l.default.createElement(d.Main,null,l.default.createElement(u.SettingsPageTitle,{name:"Webhooks"}),l.default.createElement(f.default,{handleSubmit:async l=>{b?(a(),O.mutate((0,g.default)(l),{onSuccess:e=>{p({type:"success",message:{id:"Settings.webhooks.created"}}),t(`/settings/webhooks/${e.data.id}`),n()},onError:e=>{p({type:"warning",message:{id:"notification.error"}}),r.log(e),n()}})):(a(),j.mutate({id:e,body:(0,g.default)(l)},{onSuccess:()=>{m.invalidateQueries(["get-webhook",e]),p({type:"success",message:{id:"notification.form.success.fields"}}),n()},onError:e=>{p({type:"warning",message:{id:"notification.error"}}),r.log(e),n()}}))},data:k,triggerWebhook:()=>P(null,{onError:()=>{p({type:"warning",message:{id:"notification.error"}})}}),isCreating:b,isTriggering:w,isTriggerIdle:C,triggerResponse:null===M||void 0===M?void 0:M.data.data,isDraftAndPublishEvents:S}))};t.default=m},14968:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(96486);const n=e=>e.reduce(((e,t)=>{const{key:a,value:r}=t;return""!==a?{...e,[a]:r}:e}),{});var l=e=>{const t={...e};return(0,r.set)(t,"headers",n(e.headers)),t};t.default=l},39616:function(e,t,a){"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(53547)),l=a(68547),u=r(a(13240)),d=r(a(92853));var s=()=>n.default.createElement(l.CheckPagePermissions,{permissions:u.default.settings.webhooks.create},n.default.createElement(d.default,null));t.default=s},56454:function(e,t,a){"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(53547)),l=a(68547),u=r(a(13240)),d=r(a(92853));var s=()=>n.default.createElement(l.CheckPagePermissions,{permissions:u.default.settings.webhooks.update},n.default.createElement(d.default,null));t.default=s}}]);