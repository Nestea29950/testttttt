"use strict";(self.webpackChunkstrapi_sqlite=self.webpackChunkstrapi_sqlite||[]).push([[5895],{78924:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(53547)),r=n(a(45697)),o=n(a(78384)),i=a(97132),s=a(54451),d=a(15577),u=a(49549),c=a(31512),f=a(94117),p=a(40264),m=a(33483),g=a(9524),y=n(a(74657)),b=n(a(7228)),v=a(68547),h=n(a(12285)),C=n(a(31652));const E=o.default.div.withConfig({displayName:"UpgradePlanModal__UpgradeWrapper",componentId:"sc-8aur7y-0"})(["position:absolute;z-index:3;inset:0;background:",";padding:0 ",";"],(e=>{let{theme:t}=e;return(0,v.setHexOpacity)(t.colors.neutral800,.2)}),(e=>{let{theme:t}=e;return t.spaces[8]})),O=(0,o.default)(p.Flex).withConfig({displayName:"UpgradePlanModal__UpgradeContainer",componentId:"sc-8aur7y-1"})(["position:relative;max-width:","rem;height:","rem;margin:0 auto;overflow:hidden;margin-top:10%;padding-left:","rem;img:first-of-type{position:absolute;right:0;top:0;max-width:","rem;}img:not(:first-of-type){width:","rem;margin-left:12%;margin-right:","rem;z-index:0;}"],51.875,415/16,4,22.5,8.125,1.25),k=(0,o.default)(g.Stack).withConfig({displayName:"UpgradePlanModal__StackFlexStart",componentId:"sc-8aur7y-2"})(["align-items:flex-start;max-width:","rem;z-index:0;"],25),w=(0,o.default)(f.Box).withConfig({displayName:"UpgradePlanModal__CloseButtonContainer",componentId:"sc-8aur7y-3"})(["position:absolute;right:",";top:",";"],(e=>{let{theme:t}=e;return t.spaces[4]}),(e=>{let{theme:t}=e;return t.spaces[4]})),M=e=>{let{onClose:t,isOpen:a}=e;(0,v.useLockScroll)(a);const{formatMessage:n}=(0,i.useIntl)();return a?l.default.createElement(s.Portal,null,l.default.createElement(E,{onClick:t},l.default.createElement(d.FocusTrap,{onEscape:t},l.default.createElement(O,{onClick:e=>e.stopPropagation(),"aria-labelledby":"upgrade-plan",background:"neutral0",hasRadius:!0},l.default.createElement("img",{src:h.default,alt:"air-balloon"}),l.default.createElement(w,null,l.default.createElement(u.IconButton,{onClick:t,"aria-label":"Close",icon:l.default.createElement(b.default,null)})),l.default.createElement(k,{spacing:6},l.default.createElement(m.Typography,{fontWeight:"bold",textColor:"primary600"},n({id:"app.components.UpgradePlanModal.text-ce",defaultMessage:"COMMUNITY EDITION"})),l.default.createElement(g.Stack,{spacing:2},l.default.createElement(m.Typography,{variant:"alpha",as:"h2",id:"upgrade-plan"},n({id:"app.components.UpgradePlanModal.limit-reached",defaultMessage:"You have reached the limit"})),l.default.createElement(m.Typography,null,n({id:"app.components.UpgradePlanModal.text-power",defaultMessage:"Unlock the full power of Strapi by upgrading your plan to the Enterprise Edition"}))),l.default.createElement(c.LinkButton,{href:"https://strapi.io/pricing-self-hosted",endIcon:l.default.createElement(y.default,null)},n({id:"app.components.UpgradePlanModal.button",defaultMessage:"Learn more"}))),l.default.createElement("img",{src:C.default,alt:"upgrade-arrow"}))))):null};M.propTypes={onClose:r.default.func.isRequired,isOpen:r.default.bool.isRequired};var _=M;t.default=_},37077:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(53547)),r=a(29491),o=a(97132),i=n(a(45697)),s=a(77040);const d=e=>{let{menu:t}=e;const{formatMessage:a}=(0,o.useIntl)(),n=(0,s.getSectionsToDisplay)(t).map((e=>({...e,title:e.intlLabel,links:e.links.map((e=>({...e,title:e.intlLabel,name:e.id})))}))),i=a({id:"global.settings",defaultMessage:"Settings"});return l.default.createElement(r.SubNav,{ariaLabel:i},l.default.createElement(r.SubNavHeader,{label:i}),l.default.createElement(r.SubNavSections,null,n.map((e=>l.default.createElement(r.SubNavSection,{key:e.id,label:a(e.intlLabel)},e.links.map((e=>l.default.createElement(r.SubNavLink,{withBullet:e.hasNotification,to:e.to,key:e.id},a(e.intlLabel)))))))))};d.propTypes={menu:i.default.array.isRequired};var u=d;t.default=u},91097:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsPage=y,t.default=void 0;var l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=g(t);if(a&&a.has(e))return a.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}n.default=e,a&&a.set(e,n);return n}(a(53547)),r=a(68547),o=a(39711),i=a(35395),s=a(97132),d=a(15482),u=a(63376),c=a(26595),f=n(a(70512)),p=a(77040),m=n(a(37077));function g(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(g=function(e){return e?a:t})(e)}function y(){const{settingId:e}=(0,o.useParams)(),{settings:t}=(0,r.useStrapiApp)(),{formatMessage:a}=(0,s.useIntl)(),{isLoading:n,menu:g}=(0,u.useSettingsMenu)(),y=(0,l.useMemo)((()=>(0,c.makeUniqueRoutes)(p.routes.map((e=>{let{to:t,Component:a,exact:n}=e;return(0,c.createRoute)(a,t,n)})))),[]),b=(0,p.createSectionsRoutes)(t);if(n)return l.default.createElement(r.LoadingIndicatorPage,null);if(!e)return l.default.createElement(o.Redirect,{to:"/settings/application-infos"});const v=a({id:"global.settings",defaultMessage:"Settings"});return l.default.createElement(i.Layout,{sideNav:l.default.createElement(m.default,{menu:g})},l.default.createElement(d.Helmet,{title:v}),l.default.createElement(o.Switch,null,l.default.createElement(o.Route,{path:"/settings/application-infos",component:f.default,exact:!0}),y,b))}var b=(0,l.memo)(y);t.default=b},70512:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(53547)),r=a(97132),o=a(68547),i=a(35395),s=a(80117),d=a(94117),u=a(39272),c=a(33483),f=a(9524),p=a(56156),m=n(a(74657));var g=()=>{const{formatMessage:e}=(0,r.useIntl)();(0,o.useFocusWhenNavigate)();const t=(0,o.useAppInfos)(),{shouldUpdateStrapi:a,latestStrapiReleaseTag:n,strapiVersion:g}=t,y=t.communityEdition?"app.components.UpgradePlanModal.text-ce":"app.components.UpgradePlanModal.text-ee";return l.default.createElement(i.Layout,null,l.default.createElement(o.SettingsPageTitle,{name:"Application"}),l.default.createElement(s.Main,null,l.default.createElement(i.HeaderLayout,{title:e({id:"Settings.application.title",defaultMessage:"Overview"}),subtitle:e({id:"Settings.application.description",defaultMessage:"Administration panel\u2019s global information"})}),l.default.createElement(i.ContentLayout,null,l.default.createElement(d.Box,{hasRadius:!0,background:"neutral0",shadow:"tableShadow",paddingTop:7,paddingBottom:7,paddingRight:6,paddingLeft:6},l.default.createElement(f.Stack,{spacing:5},l.default.createElement(c.Typography,{variant:"delta",as:"h3"},e({id:"global.details",defaultMessage:"Details"})),l.default.createElement(u.Grid,{paddingTop:1},l.default.createElement(u.GridItem,{col:6,s:12},l.default.createElement(c.Typography,{variant:"sigma",textColor:"neutral600"},e({id:"Settings.application.strapiVersion",defaultMessage:"strapi version"})),l.default.createElement(c.Typography,{as:"p"},"v",g),l.default.createElement(p.Link,{href:t.communityEdition?"https://discord.strapi.io":"https://support.strapi.io/support/home",endIcon:l.default.createElement(m.default,null)},e({id:"Settings.application.get-help",defaultMessage:"Get help"}))),l.default.createElement(u.GridItem,{col:6,s:12},l.default.createElement(c.Typography,{variant:"sigma",textColor:"neutral600"},e({id:"Settings.application.edition-title",defaultMessage:"current plan"})),l.default.createElement(c.Typography,{as:"p"},e({id:y,defaultMessage:""+(t.communityEdition?"Community Edition":"Enterprise Edition")})))),l.default.createElement(u.Grid,{paddingTop:1},l.default.createElement(u.GridItem,{col:6,s:12},a&&l.default.createElement(p.Link,{href:`https://github.com/strapi/strapi/releases/tag/${n}`,endIcon:l.default.createElement(m.default,null)},e({id:"Settings.application.link-upgrade",defaultMessage:"Upgrade your admin panel"}))),l.default.createElement(u.GridItem,{col:6,s:12},l.default.createElement(p.Link,{href:"https://strapi.io/pricing-self-hosted",endIcon:l.default.createElement(m.default,null)},e({id:"Settings.application.link-pricing",defaultMessage:"See all pricing plans"})))),l.default.createElement(d.Box,{paddingTop:1},l.default.createElement(c.Typography,{variant:"sigma",textColor:"neutral600"},e({id:"Settings.application.node-version",defaultMessage:"node version"})),l.default.createElement(c.Typography,{as:"p"},t.nodeVersion)))))))};t.default=g},7126:function(e,t,a){var n=a(95318);t.Z=void 0;var l=n(a(53547)),r=a(39711);var o=()=>l.default.createElement(r.Redirect,{to:"/404"});t.Z=o},21950:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(78384)),r=a(40264);var o=(0,l.default)(r.Flex).withConfig({displayName:"CollapseLabel",componentId:"sc-1ssinbk-0"})(["padding-right:",";overflow:hidden;flex:1;",""],(e=>{let{theme:t}=e;return t.spaces[2]}),(e=>{let{isCollapsable:t}=e;return t&&"cursor: pointer;"}));t.default=o},30380:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(53547)),r=n(a(45697)),o=n(a(17581)),i=a(64459),s=a(97132),d=n(a(78384));const u=d.default.div.withConfig({displayName:"ConditionsButton__Wrapper",componentId:"sc-wd45es-0"})(["position:relative;",""],(e=>{let{hasConditions:t,disabled:a,theme:n}=e;return t&&`\n    &:before {\n      content: '';\n      position: absolute;\n      top: -3px;\n      left: -10px;\n      width: 6px;\n      height: 6px;\n      border-radius: 1.25rem;;\n      background: ${a?n.colors.neutral100:n.colors.primary600};\n    }\n  `})),c=e=>{let{onClick:t,className:a,hasConditions:n,variant:r}=e;const{formatMessage:d}=(0,s.useIntl)();return l.default.createElement(u,{hasConditions:n,className:a},l.default.createElement(i.Button,{variant:r,startIcon:l.default.createElement(o.default,null),onClick:t},d({id:"global.settings",defaultMessage:"Settings"})))};c.defaultProps={className:null,hasConditions:!1,variant:"tertiary"},c.propTypes={onClick:r.default.func.isRequired,className:r.default.string,hasConditions:r.default.bool,variant:r.default.string};var f=(0,d.default)(c).withConfig({displayName:"ConditionsButton",componentId:"sc-wd45es-1"})([""]);t.default=f},86907:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(53547)),r=n(a(45697)),o=a(94117),i=a(40264),s=a(33483),d=a(2632),u=n(a(11700)),c=a(97132),f=n(a(78384)),p=a(12037);const m=window&&window.strapi&&window.strapi.isEE?a(6561).Z:a(83292).Z,g=(0,f.default)(i.Flex).withConfig({displayName:"ActionRow__FlexWrapper",componentId:"sc-1bqpgdl-0"})(["height:",";"],p.rowHeight),y=e=>{let{arrayOfOptionsGroupedByCategory:t,isFormDisabled:a,isGrey:n,label:r,name:f,onChange:p,value:y}=e;const{formatMessage:b}=(0,c.useIntl)(),v=t.reduce(((e,t)=>{const[a,n]=t;return[...e,{label:(0,u.default)(a),children:n.map((e=>({label:e.displayName,value:e.id})))}]}),[]),h=Object.values(y).map((e=>Object.entries(e).filter((e=>{let[,t]=e;return t})).map((e=>{let[t]=e;return t})))).flat();return l.default.createElement(g,{as:"li",background:n?"neutral100":"neutral0"},l.default.createElement(i.Flex,{paddingLeft:6,style:{width:180}},l.default.createElement(s.Typography,{variant:"sigma",textColor:"neutral600"},b({id:"Settings.permissions.conditions.can",defaultMessage:"Can"}),"\xa0"),l.default.createElement(s.Typography,{variant:"sigma",title:r,textColor:"primary600",ellipsis:!0},b({id:`Settings.roles.form.permissions.${r.toLowerCase()}`,defaultMessage:r})),l.default.createElement(s.Typography,{variant:"sigma",textColor:"neutral600"},"\xa0",b({id:"Settings.permissions.conditions.when",defaultMessage:"When"}))),l.default.createElement(o.Box,{style:{maxWidth:430,width:"100%"}},l.default.createElement(d.MultiSelectNested,{id:f,customizeContent:e=>`${e.length} currently selected`,onChange:e=>{const[[,a]]=t,n=a.reduce(((t,a)=>({[a.id]:e.includes(a.id),...t})),{});p(f,n)},value:h,options:v,disabled:a||m})))};y.propTypes={arrayOfOptionsGroupedByCategory:r.default.array.isRequired,isFormDisabled:r.default.bool.isRequired,isGrey:r.default.bool.isRequired,label:r.default.string.isRequired,name:r.default.string.isRequired,value:r.default.object.isRequired,onChange:r.default.func.isRequired};var b=y;t.default=b},83292:function(e,t){t.Z=void 0;t.Z=true},47173:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=E(t);if(a&&a.has(e))return a.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}n.default=e,a&&a.set(e,n);return n}(a(53547)),r=n(a(45697)),o=a(94117),i=a(64459),s=a(97833),d=a(9524),u=a(68991),c=a(44981),f=a(33483),p=n(a(66312)),m=n(a(27361)),g=n(a(7739)),y=n(a(11700)),b=a(97132),v=a(63376),h=n(a(86907)),C=n(a(13659));function E(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(E=function(e){return e?a:t})(e)}const O=e=>{let{actions:t,headerBreadCrumbs:a,isFormDisabled:n,onClosed:r,onToggle:E}=e;const{formatMessage:O}=(0,b.useIntl)(),{availableConditions:k,modifiedData:w,onChangeConditions:M}=(0,v.usePermissionsDataManager)(),_=(0,l.useMemo)((()=>Object.entries((0,g.default)(k,"category"))),[k]),j=t.filter((e=>{let{isDisplayed:t,hasSomeActionsSelected:a,hasAllActionsSelected:n}=e;return t&&(a||n)})),P=(0,l.useMemo)((()=>(0,C.default)(j,w,_)),[j,w,_]),[T,x]=(0,l.useState)(P),D=(e,t)=>{x((0,p.default)((a=>{a[e]||(a[e]={}),a[e].default||(a[e].default={}),a[e].default=t})))};return l.default.createElement(u.ModalLayout,{labelledBy:"condition-modal-breadcrumbs",onClose:r},l.default.createElement(u.ModalHeader,null,l.default.createElement(c.Breadcrumbs,{id:"condition-modal-breadcrumbs",label:a.join(", ")},a.map((e=>l.default.createElement(c.Crumb,{key:e},(0,y.default)(O({id:e,defaultMessage:e}))))))),l.default.createElement(o.Box,{padding:8},l.default.createElement(d.Stack,{spacing:6},l.default.createElement(f.Typography,{variant:"beta",as:"h2"},O({id:"Settings.permissions.conditions.define-conditions",defaultMessage:"Define conditions"})),l.default.createElement(o.Box,null,l.default.createElement(s.Divider,null)),l.default.createElement(o.Box,null,0===j.length&&l.default.createElement(f.Typography,null,O({id:"Settings.permissions.conditions.no-actions",defaultMessage:"You first need to select actions (create, read, update, ...) before defining conditions on them."})),l.default.createElement("ul",null,j.map(((e,t)=>{let{actionId:a,label:r,pathToConditionsObject:o}=e;const i=o.join("..");return l.default.createElement(h.default,{key:a,arrayOfOptionsGroupedByCategory:_,label:r,isFormDisabled:n,isGrey:t%2===0,name:i,onChange:D,value:(0,m.default)(T,i,{})})})))))),l.default.createElement(u.ModalFooter,{startActions:l.default.createElement(i.Button,{variant:"tertiary",onClick:E},O({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endActions:l.default.createElement(i.Button,{onClick:()=>{const e=Object.entries(T).reduce(((e,t)=>{const[a,n]=t,l=Object.values(n).reduce(((e,t)=>({...e,...t})),{});return e[a]=l,e}),{});M(e),E()}},O({id:"Settings.permissions.conditions.apply",defaultMessage:"Apply"}))}))};O.propTypes={actions:r.default.arrayOf(r.default.shape({actionId:r.default.string.isRequired,checkboxName:r.default.string,hasSomeActionsSelected:r.default.bool.isRequired,hasAllActionsSelected:r.default.bool,isDisplayed:r.default.bool.isRequired,label:r.default.string})).isRequired,headerBreadCrumbs:r.default.arrayOf(r.default.string).isRequired,isFormDisabled:r.default.bool.isRequired,onClosed:r.default.func.isRequired,onToggle:r.default.func.isRequired};var k=O;t.default=k},13659:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.createConditionsForm=t.createCategoryForm=void 0;var n=a(96486);const l=(e,t)=>e.reduce(((e,a)=>(e[a.id]=(0,n.get)(t,a.id,!1),e)),{});t.createConditionsForm=l;const r=(e,t)=>e.reduce(((e,a)=>{const[n,r]=a,o=l(r,t);return e[n]=o,e}),{});t.createCategoryForm=r;var o=(e,t,a)=>e.reduce(((e,l)=>{const o=(0,n.get)(t,[...l.pathToConditionsObject,"conditions"],{}),i=r(a,o);return e[l.pathToConditionsObject.join("..")]=i,e}),{});t.default=o},30841:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=E(t);if(a&&a.has(e))return a.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}n.default=e,a&&a.set(e,n);return n}(a(53547)),r=n(a(45697)),o=a(97132),i=n(a(78384)),s=a(46458),d=a(40264),u=n(a(27361)),c=a(63376),f=n(a(7457)),p=a(12037),m=n(a(92395)),g=n(a(43148)),y=a(89362),b=a(91416),v=n(a(98459)),h=n(a(19090)),C=n(a(88685));function E(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(E=function(e){return e?a:t})(e)}const O=window&&window.strapi&&window.strapi.isEE?a(11720).Z:a(75312).Z,k=(0,i.default)(d.Flex).withConfig({displayName:"ActionRow__Cell",componentId:"sc-4agenc-0"})(["width:",";position:relative;"],p.cellWidth),w=(0,i.default)(d.Flex).withConfig({displayName:"ActionRow__Wrapper",componentId:"sc-4agenc-1"})(["height:",";flex:1;"," ",";"],p.rowHeight,(e=>{let{isCollapsable:t,theme:a}=e;return t&&`\n      ${v.default} {\n        display: block;\n        color: ${a.colors.neutral100};\n      }\n      &:hover {\n        ${(0,b.activeStyle)(a)}\n      }\n  `}),(e=>{let{isActive:t,theme:a}=e;return t&&(0,b.activeStyle)(a)})),M=e=>{let{childrenForm:t,label:a,isFormDisabled:n,name:r,required:i,pathToData:p,propertyActions:b,propertyName:E,isOdd:M}=e;const{formatMessage:_}=(0,o.useIntl)(),[j,P]=(0,l.useState)(null),{modifiedData:T,onChangeCollectionTypeLeftActionRowCheckbox:x,onChangeParentCheckbox:D,onChangeSimpleCheckbox:R}=(0,c.usePermissionsDataManager)(),S=j===r,A=(0,l.useMemo)((()=>Array.isArray(t)?t:[]),[t]),I=A.length>0,F=(0,l.useCallback)((()=>{I&&P((e=>e===r?null:r))}),[I,r]),{hasAllActionsSelected:q,hasSomeActionsSelected:N}=(0,l.useMemo)((()=>(0,C.default)(b,T,p,E,r)),[b,T,p,E,r]);return l.default.createElement(l.default.Fragment,null,l.default.createElement(w,{alignItems:"center",isCollapsable:I,isActive:S,background:M?"neutral100":"neutral0"},l.default.createElement(d.Flex,null,l.default.createElement(g.default,{onChange:e=>{let{target:{value:t}}=e;x(p,E,r,t)},onClick:F,isCollapsable:I,isFormDisabled:n,label:a,someChecked:N,value:q,isActive:S},i&&l.default.createElement(m.default,null),l.default.createElement(v.default,{$isActive:S})),l.default.createElement(d.Flex,null,b.map((e=>{let{label:t,isActionRelatedToCurrentProperty:a,actionId:o}=e;if(!a)return l.default.createElement(f.default,{key:t});const i=[...p.split(".."),o,"properties",E,r];if(!I){const e=(0,u.default)(T,i,!1);return l.default.createElement(k,{key:o,justifyContent:"center",alignItems:"center"},l.default.createElement(s.BaseCheckbox,{disabled:n||O,name:i.join(".."),"aria-label":_({id:"Settings.permissions.select-by-permission",defaultMessage:"Select {label} permission"},{label:`${r} ${t}`}),onValueChange:e=>{R({target:{name:i.join(".."),value:e}})},value:e}))}const d=(0,u.default)(T,i,{}),{hasAllActionsSelected:c,hasSomeActionsSelected:m}=(0,y.getCheckboxState)(d);return l.default.createElement(k,{key:t,justifyContent:"center",alignItems:"center"},l.default.createElement(s.BaseCheckbox,{disabled:n||O,name:i.join(".."),onValueChange:e=>{D({target:{name:i.join(".."),value:e}})},"aria-label":_({id:"Settings.permissions.select-by-permission",defaultMessage:"Select {label} permission"},{label:`${r} ${t}`}),value:c,indeterminate:m}))}))))),S&&l.default.createElement(h.default,{childrenForm:A,isFormDisabled:n,parentName:r,pathToDataFromActionRow:p,propertyName:E,propertyActions:b,recursiveLevel:0}))};M.defaultProps={childrenForm:[],required:!1},M.propTypes={childrenForm:r.default.array,label:r.default.string.isRequired,isFormDisabled:r.default.bool.isRequired,name:r.default.string.isRequired,pathToData:r.default.string.isRequired,propertyActions:r.default.array.isRequired,propertyName:r.default.string.isRequired,required:r.default.bool,isOdd:r.default.bool.isRequired};var _=(0,l.memo)(M);t.default=_},75312:function(e,t){t.Z=void 0;t.Z=true},88685:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.getActionIdsFromPropertyActions=t.default=void 0;var n=a(96486),l=a(89362);const r=e=>e.reduce(((e,t)=>(t.isActionRelatedToCurrentProperty&&e.push(t.actionId),e)),[]);t.getActionIdsFromPropertyActions=r;var o=(e,t,a,o,i)=>{const s=r(e).reduce(((e,l)=>{const r=[...a.split(".."),l,"properties",o,i],s=(0,n.get)(t,r,!1);return e[l]=s,e}),{});return(0,l.getCheckboxState)(s)};t.default=o},98459:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(78384)),r=n(a(40413));var o=(0,l.default)(r.default).withConfig({displayName:"CarretIcon",componentId:"sc-1sz33o8-0"})(["display:none;width:","rem;transform:rotate(","deg);margin-left:",";"],.625,(e=>{let{$isActive:t}=e;return t?"180":"0"}),(e=>{let{theme:t}=e;return t.spaces[2]}));t.default=o},62153:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(53547)),r=n(a(45697)),o=a(97132),i=n(a(78384)),s=a(40264),d=a(33483),u=a(12037);const c=(0,i.default)(s.Flex).withConfig({displayName:"Header__HeaderLabel",componentId:"sc-1x5jpk6-0"})(["width:",";flex-shrink:0;"],u.cellWidth),f=(0,i.default)(s.Flex).withConfig({displayName:"Header__PropertyLabelWrapper",componentId:"sc-1x5jpk6-1"})(["width:",";height:",";flex-shrink:0;"],u.firstRowWidth,u.rowHeight),p=e=>{let{headers:t,label:a}=e;const{formatMessage:n}=(0,o.useIntl)(),r=n({id:"Settings.roles.form.permission.property-label",defaultMessage:"{label} permissions"},{label:a});return l.default.createElement(s.Flex,null,l.default.createElement(f,{alignItems:"center",paddingLeft:6},l.default.createElement(d.Typography,{variant:"sigma",textColor:"neutral500"},r)),t.map((e=>e.isActionRelatedToCurrentProperty?l.default.createElement(c,{justifyContent:"center",key:e.label},l.default.createElement(d.Typography,{variant:"sigma",textColor:"neutral500"},n({id:`Settings.roles.form.permissions.${e.label.toLowerCase()}`,defaultMessage:e.label}))):l.default.createElement(c,{key:e.label}))))};p.propTypes={headers:r.default.arrayOf(r.default.shape({label:r.default.string.isRequired,isActionRelatedToCurrentProperty:r.default.bool.isRequired})).isRequired,label:r.default.string.isRequired};var m=p;t.default=m},19090:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(67154)),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=w(t);if(a&&a.has(e))return a.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}n.default=e,a&&a.set(e,n);return n}(a(53547)),o=n(a(45697)),i=n(a(27361)),s=n(a(11700)),d=a(97132),u=n(a(78384)),c=a(46458),f=a(94117),p=a(40264),m=a(33483),g=a(63376),y=n(a(21950)),b=n(a(55946)),v=n(a(7457)),h=a(12037),C=n(a(92395)),E=a(89362),O=a(91416),k=n(a(98459));function w(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(w=function(e){return e?a:t})(e)}const M=window&&window.strapi&&window.strapi.isEE?a(48535).Z:a(24699).Z,_=(0,u.default)(p.Flex).withConfig({displayName:"SubActionRow__Cell",componentId:"sc-7y8yzq-0"})(["width:",";position:relative;"],h.cellWidth),j=(0,u.default)(p.Flex).withConfig({displayName:"SubActionRow__RowWrapper",componentId:"sc-7y8yzq-1"})(["height:",";"],h.rowHeight),P=(0,u.default)(f.Box).withConfig({displayName:"SubActionRow__Wrapper",componentId:"sc-7y8yzq-2"})(["padding-left:","rem;"],31/16),T=(0,u.default)(f.Box).withConfig({displayName:"SubActionRow__LeftBorderTimeline",componentId:"sc-7y8yzq-3"})(["border-left:",";"],(e=>{let{isVisible:t,theme:a}=e;return t?`4px solid ${a.colors.primary200}`:"4px solid transparent"})),x=(0,u.default)(p.Flex).withConfig({displayName:"SubActionRow__RowStyle",componentId:"sc-7y8yzq-4"})(["padding-left:",";width:","px;"," ",";"],(e=>{let{theme:t}=e;return t.spaces[4]}),(e=>{let{level:t}=e;return 145-36*t}),(e=>{let{isCollapsable:t,theme:a}=e;return t&&`\n      ${k.default} {\n        display: block;\n        color: ${a.colors.neutral100};\n      }\n      &:hover {\n        ${(0,O.activeStyle)(a)}\n      }\n  `}),(e=>{let{isActive:t,theme:a}=e;return t&&(0,O.activeStyle)(a)})),D=u.default.div.withConfig({displayName:"SubActionRow__TopTimeline",componentId:"sc-7y8yzq-5"})(["padding-top:",";margin-top:",";width:","rem;background-color:",";border-top-left-radius:2px;border-top-right-radius:2px;"],(e=>{let{theme:t}=e;return t.spaces[2]}),(e=>{let{theme:t}=e;return t.spaces[2]}),.25,(e=>{let{theme:t}=e;return t.colors.primary200})),R=e=>{let{childrenForm:t,isFormDisabled:a,recursiveLevel:n,pathToDataFromActionRow:o,propertyActions:u,parentName:h,propertyName:O}=e;const{formatMessage:w}=(0,d.useIntl)(),{modifiedData:S,onChangeParentCheckbox:A,onChangeSimpleCheckbox:I}=(0,g.usePermissionsDataManager)(),[F,q]=(0,r.useState)(null),N=e=>{q((t=>t===e?null:e))},L=(0,r.useMemo)((()=>F?t.find((e=>{let{value:t}=e;return t===F})):null),[F,t]);return r.default.createElement(P,null,r.default.createElement(D,null),t.map(((e,d)=>{let{label:g,value:P,required:D,children:q}=e;const W=d+1<t.length,B=Array.isArray(q),$=F===P;return r.default.createElement(T,{key:P,isVisible:W},r.default.createElement(j,null,r.default.createElement(b.default,{color:"primary200"}),r.default.createElement(p.Flex,{style:{flex:1}},r.default.createElement(x,{level:n,isActive:$,isCollapsable:B},r.default.createElement(y.default,(0,l.default)({alignItems:"center",isCollapsable:B},B&&{onClick:()=>N(P),"aria-expanded":$,onKeyDown:e=>{let{key:t}=e;return("Enter"===t||" "===t)&&N(P)},tabIndex:0,role:"button"},{title:g}),r.default.createElement(m.Typography,{ellipsis:!0},(0,s.default)(g)),D&&r.default.createElement(C.default,null),r.default.createElement(k.default,{$isActive:$}))),r.default.createElement(p.Flex,{style:{flex:1}},u.map((e=>{let{actionId:t,label:n,isActionRelatedToCurrentProperty:l}=e;if(!l)return r.default.createElement(v.default,{key:t});const s=[...o.split(".."),t,"properties",O,...h.split(".."),P],d=(0,i.default)(S,s,!1);if(!q)return r.default.createElement(_,{key:n,justifyContent:"center",alignItems:"center"},r.default.createElement(c.BaseCheckbox,{disabled:a||M,name:s.join(".."),"aria-label":w({id:"Settings.permissions.select-by-permission",defaultMessage:"Select {label} permission"},{label:`${h} ${g} ${n}`}),onValueChange:e=>{I({target:{name:s.join(".."),value:e}})},value:d}));const{hasAllActionsSelected:u,hasSomeActionsSelected:f}=(0,E.getCheckboxState)(d);return r.default.createElement(_,{key:n,justifyContent:"center",alignItems:"center"},r.default.createElement(c.BaseCheckbox,{key:n,disabled:a||M,name:s.join(".."),"aria-label":w({id:"Settings.permissions.select-by-permission",defaultMessage:"Select {label} permission"},{label:`${h} ${g} ${n}`}),onValueChange:e=>{A({target:{name:s.join(".."),value:e}})},value:u,indeterminate:f}))}))))),L&&$&&r.default.createElement(f.Box,{paddingBottom:2},r.default.createElement(R,{isFormDisabled:a,parentName:`${h}..${P}`,pathToDataFromActionRow:o,propertyActions:u,propertyName:O,recursiveLevel:n+1,childrenForm:L.children})))})))};R.propTypes={childrenForm:o.default.array.isRequired,isFormDisabled:o.default.bool.isRequired,parentName:o.default.string.isRequired,pathToDataFromActionRow:o.default.string.isRequired,propertyActions:o.default.array.isRequired,propertyName:o.default.string.isRequired,recursiveLevel:o.default.number.isRequired};var S=(0,r.memo)(R);t.default=S},24699:function(e,t){t.Z=void 0;t.Z=true},2417:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=c(t);if(a&&a.has(e))return a.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}n.default=e,a&&a.set(e,n);return n}(a(53547)),r=n(a(45697)),o=n(a(78384)),i=a(94117),s=n(a(20538)),d=n(a(62153)),u=n(a(30841));function c(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(c=function(e){return e?a:t})(e)}const f=o.default.div.withConfig({displayName:"CollapsePropertyMatrix__Wrapper",componentId:"sc-19phz29-0"})(["display:inline-flex;flex-direction:column;min-width:0;"]),p=e=>{let{availableActions:t,childrenForm:a,isFormDisabled:n,label:r,pathToData:o,propertyName:c}=e;const p=(0,l.useMemo)((()=>(0,s.default)(t,c)),[t,c]);return l.default.createElement(f,null,l.default.createElement(d.default,{label:r,headers:p}),l.default.createElement(i.Box,null,a.map(((e,t)=>{let{children:a,label:r,value:i,required:s}=e;return l.default.createElement(u.default,{childrenForm:a,key:i,label:r,isFormDisabled:n,name:i,required:s,propertyActions:p,pathToData:o,propertyName:c,isOdd:t%2===0})}))))};p.propTypes={childrenForm:r.default.array.isRequired,availableActions:r.default.array.isRequired,isFormDisabled:r.default.bool.isRequired,label:r.default.string.isRequired,pathToData:r.default.string.isRequired,propertyName:r.default.string.isRequired};var m=p;t.default=m},20538:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(e,t)=>e.map((e=>{const a=Array.isArray(e.applyToProperties)&&-1!==e.applyToProperties.indexOf(t)&&e.isDisplayed;return{label:e.label,actionId:e.actionId,isActionRelatedToCurrentProperty:a}}));t.default=a},62358:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=w(t);if(a&&a.has(e))return a.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}n.default=e,a&&a.set(e,n);return n}(a(53547)),r=n(a(45697)),o=n(a(32080)),i=n(a(80499)),s=a(46458),d=a(94117),u=a(40264),c=n(a(27361)),f=n(a(57557)),p=a(97132),m=n(a(78384)),g=a(63376),y=n(a(30380)),b=n(a(47173)),v=n(a(7457)),h=a(12037),C=n(a(43148)),E=a(89362),O=n(a(92168)),k=n(a(73185));function w(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(w=function(e){return e?a:t})(e)}const M=window&&window.strapi&&window.strapi.isEE?a(38706).Z:a(44827).Z,_=(e,t)=>`\n  ${j} {\n    background-color: ${e.colors.primary100};\n    color: ${e.colors.primary600};\n    border-radius: ${t?"2px 2px 0 0":"2px"};\n  }\n  ${x} {\n    display: flex;\n  }\n  ${y.default} {\n    display: block;\n  }\n  &:hover {\n   ${(0,k.default)(e)}\n  }\n\n  &:focus-within {\n    ${e=>{let{theme:t,isActive:a}=e;return _(t,a)}}\n  }\n  \n`,j=m.default.div.withConfig({displayName:"Collapse__Wrapper",componentId:"sc-132fji1-0"})(["flex:1;display:flex;align-items:center;height:",";background-color:",";border:1px solid transparent;"],h.rowHeight,(e=>{let{isGrey:t,theme:a}=e;return t?a.colors.neutral100:a.colors.neutral0})),P=m.default.div.withConfig({displayName:"Collapse__BoxWrapper",componentId:"sc-132fji1-1"})(["display:inline-flex;min-width:100%;","{display:none;}"," &:hover{","}"],y.default,(e=>{let{isActive:t,theme:a}=e;return t&&_(a,t)}),(e=>{let{theme:t,isActive:a}=e;return _(t,a)})),T=(0,m.default)(u.Flex).withConfig({displayName:"Collapse__Cell",componentId:"sc-132fji1-2"})(["width:",";position:relative;"],h.cellWidth),x=(0,m.default)(d.Box).withConfig({displayName:"Collapse__Chevron",componentId:"sc-132fji1-3"})(["display:none;svg{width:11px;}*{fill:",";}"],(e=>{let{theme:t}=e;return t.colors.primary600})),D=m.default.span.withConfig({displayName:"Collapse__TinyDot",componentId:"sc-132fji1-4"})(["position:absolute;top:-6px;left:37px;width:6px;height:6px;border-radius:20px;background:",";"],(e=>{let{theme:t}=e;return t.colors.primary600})),R=(0,m.default)(d.Box).withConfig({displayName:"Collapse__AbsoluteBox",componentId:"sc-132fji1-5"})(["position:absolute;right:9px;transform:translateY(10px);"]),S=e=>{let{availableActions:t,isActive:a,isGrey:n,isFormDisabled:r,label:d,onClickToggle:m,pathToData:h}=e;const[k,w]=(0,l.useState)(!1),{formatMessage:_}=(0,p.useIntl)(),{modifiedData:S,onChangeParentCheckbox:A,onChangeSimpleCheckbox:I}=(0,g.usePermissionsDataManager)(),F=()=>{w((e=>!e))},q=(0,c.default)(S,h.split(".."),{}),N=(0,l.useMemo)((()=>Object.keys(q).reduce(((e,t)=>(e[t]=(0,f.default)(q[t],"conditions"),e)),{})),[q]),{hasAllActionsSelected:L,hasSomeActionsSelected:W}=(0,E.getCheckboxState)(N),B=(0,l.useMemo)((()=>(0,O.default)(t,S,h)),[t,S,h]),$=B.some((e=>{let{hasConditions:t}=e;return t}));return l.default.createElement(P,{isActive:a},l.default.createElement(j,{isGrey:n},l.default.createElement(C.default,{isCollapsable:!0,isFormDisabled:r,label:d,checkboxName:h,onChange:A,onClick:m,someChecked:W,value:L,isActive:a},l.default.createElement(x,{paddingLeft:2},a?l.default.createElement(i.default,null):l.default.createElement(o.default,null))),l.default.createElement(u.Flex,{style:{flex:1}},B.map((e=>{let{actionId:t,hasConditions:a,hasAllActionsSelected:n,hasSomeActionsSelected:o,isDisplayed:i,isParentCheckbox:u,checkboxName:c,label:f}=e;return i?u?l.default.createElement(T,{key:t,justifyContent:"center",alignItems:"center"},a&&l.default.createElement(D,null),l.default.createElement(s.BaseCheckbox,{disabled:r||M,name:c,"aria-label":_({id:"Settings.permissions.select-by-permission",defaultMessage:"Select {label} permission"},{label:`${f} ${d}`}),onValueChange:e=>{A({target:{name:c,value:e}})},indeterminate:o,value:n})):l.default.createElement(T,{key:t,justifyContent:"center",alignItems:"center"},a&&l.default.createElement(D,null),l.default.createElement(s.BaseCheckbox,{disabled:r||M,indeterminate:a,name:c,onValueChange:e=>{I({target:{name:c,value:e}})},value:n})):l.default.createElement(v.default,{key:t})}))),k&&l.default.createElement(b.default,{headerBreadCrumbs:[d,"app.components.LeftMenuLinkContainer.settings"],actions:B,isFormDisabled:r,onClosed:()=>{w(!1)},onToggle:F})),l.default.createElement(R,null,l.default.createElement(y.default,{onClick:F,hasConditions:$})))};S.propTypes={availableActions:r.default.array.isRequired,isActive:r.default.bool.isRequired,isGrey:r.default.bool.isRequired,isFormDisabled:r.default.bool.isRequired,label:r.default.string.isRequired,onClickToggle:r.default.func.isRequired,pathToData:r.default.string.isRequired};var A=S;t.default=A},44827:function(e,t){t.Z=void 0;t.Z=true},92168:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(96486),l=a(89362);var r=(e,t,a)=>e.map((e=>{let{actionId:r,isDisplayed:o,applyToProperties:i,label:s}=e;if(!o)return{actionId:r,hasSomeActionsSelected:!1,isDisplayed:o};const d=[...a.split(".."),r],u=(0,n.isEmpty)(i)?[...d,"properties","enabled"]:d,c=u.join(".."),f=(0,n.get)(t,[...d,"conditions"],null),p=(0,l.createArrayOfValues)(f).some((e=>e));if((0,n.isEmpty)(i)){const e=(0,n.get)(t,u,!1);return{actionId:r,checkboxName:c,hasAllActionsSelected:e,hasConditions:p,hasSomeActionsSelected:e,isDisplayed:o,isParentCheckbox:!1,label:s,pathToConditionsObject:d}}const m=(0,n.get)(t,u,null),{hasAllActionsSelected:g,hasSomeActionsSelected:y}=(0,l.getCheckboxState)(m);return{actionId:r,checkboxName:c,hasAllActionsSelected:g,hasConditions:p,hasSomeActionsSelected:y,isDisplayed:o,isParentCheckbox:!0,label:s,pathToConditionsObject:d}}));t.default=r},68329:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(45697)),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=u(t);if(a&&a.has(e))return a.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}n.default=e,a&&a.set(e,n);return n}(a(53547)),o=n(a(78384)),i=n(a(62358)),s=n(a(2417)),d=a(91416);function u(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(u=function(e){return e?a:t})(e)}const c=o.default.div.withConfig({displayName:"ContentTypeCollapse__Wrapper",componentId:"sc-1ldk4pa-0"})(["flex-direction:column;display:inline-flex;min-width:100%;",""],(e=>{let{theme:t,isActive:a}=e;return a&&`border: 1px solid ${t.colors.primary600};`})),f=e=>{let{allActions:t,contentTypeName:a,label:n,index:l,isActive:o,isFormDisabled:u,onClickToggleCollapse:f,pathToData:p,properties:m}=e;const g=(0,r.useCallback)((()=>{f(a)}),[a,f]),y=(0,r.useMemo)((()=>(0,d.getAvailableActions)(t,a)),[t,a]);return r.default.createElement(c,{isActive:o},r.default.createElement(i.default,{availableActions:y,isActive:o,isGrey:l%2===0,isFormDisabled:u,label:n,onClickToggle:g,pathToData:p}),o&&m.map((e=>{let{label:t,value:a,children:n}=e;return r.default.createElement(s.default,{availableActions:y,childrenForm:n,isFormDisabled:u,label:t,pathToData:p,propertyName:a,key:a})})))};f.propTypes={allActions:l.default.array.isRequired,contentTypeName:l.default.string.isRequired,index:l.default.number.isRequired,isActive:l.default.bool.isRequired,isFormDisabled:l.default.bool.isRequired,label:l.default.string.isRequired,onClickToggleCollapse:l.default.func.isRequired,pathToData:l.default.string.isRequired,properties:l.default.array.isRequired};var p=f;t.default=p},73185:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=a(33483),r=n(a(98459));var o=e=>`\n  ${l.Typography} {\n    color: ${e.colors.primary600};\n    font-weight: ${e.fontWeights.bold}\n  }\n  ${r.default} {\n    display: block;\n    path {\n      fill: ${e.colors.primary600}\n    };\n  }\n`;t.default=o},86982:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(e,t)=>e.map((e=>{const a=Array.isArray(e.subjects)&&-1!==e.subjects.indexOf(t);return{...e,isDisplayed:a}}));t.default=a},91416:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"activeStyle",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"getAvailableActions",{enumerable:!0,get:function(){return r.default}});var l=n(a(73185)),r=n(a(86982))},71088:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=i(t);if(a&&a.has(e))return a.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}n.default=e,a&&a.set(e,n);return n}(a(53547)),r=n(a(45697)),o=n(a(68329));function i(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(i=function(e){return e?a:t})(e)}const s=e=>{let{actions:t,isFormDisabled:a,pathToData:n,subjects:r}=e;const[i,s]=(0,l.useState)(null),d=e=>{s(i===e?null:e)};return r.map(((e,r)=>{let{uid:s,label:u,properties:c}=e;return l.default.createElement(o.default,{allActions:t,key:s,contentTypeName:s,label:u,isActive:i===s,isFormDisabled:a,index:r,onClickToggleCollapse:d,pathToData:`${n}..${s}`,properties:c})}))};s.defaultProps={actions:[],subjects:[]},s.propTypes={actions:r.default.array.isRequired,isFormDisabled:r.default.bool.isRequired,pathToData:r.default.string.isRequired,subjects:r.default.arrayOf(r.default.shape({uid:r.default.string.isRequired,label:r.default.string.isRequired,properties:r.default.array.isRequired}))};var d=(0,l.memo)(s);t.default=d},65743:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=c(t);if(a&&a.has(e))return a.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}n.default=e,a&&a.set(e,n);return n}(a(53547)),r=n(a(45697)),o=a(94117),i=n(a(78384)),s=n(a(89734)),d=n(a(71088)),u=n(a(96630));function c(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(c=function(e){return e?a:t})(e)}const f=(0,i.default)(o.Box).withConfig({displayName:"ContentTypes__StyledBox",componentId:"sc-1hdkmsf-0"})(["overflow-x:auto;"]),p=e=>{let{isFormDisabled:t,kind:a,layout:{actions:n,subjects:r}}=e;const o=(0,s.default)([...r],"label");return l.default.createElement(f,{background:"neutral0"},l.default.createElement(u.default,{actions:n,kind:a,isFormDisabled:t}),l.default.createElement(d.default,{actions:n,isFormDisabled:t,pathToData:a,subjects:o}))};p.propTypes={isFormDisabled:r.default.bool.isRequired,kind:r.default.string.isRequired,layout:r.default.shape({actions:r.default.array,subjects:r.default.arrayOf(r.default.shape({uid:r.default.string.isRequired,label:r.default.string.isRequired,properties:r.default.array.isRequired}))}).isRequired};var m=(0,l.memo)(p);t.default=m},55946:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(67154)),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=d(t);if(a&&a.has(e))return a.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}n.default=e,a&&a.set(e,n);return n}(a(53547)),o=n(a(45697)),i=n(a(78384)),s=a(94117);function d(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(d=function(e){return e?a:t})(e)}const u=(0,i.default)(s.Box).withConfig({displayName:"Curve__StyledBox",componentId:"sc-18jpkp6-0"})(["transform:translate(-4px,-12px);&:before{content:'';width:","rem;height:","rem;background:",";display:block;}"],.25,.75,(e=>{let{theme:t}=e;return t.colors.primary200})),c=i.default.svg.withConfig({displayName:"Curve__Svg",componentId:"sc-18jpkp6-1"})(["position:relative;flex-shrink:0;transform:translate(-0.5px,-1px);*{fill:",";}"],(e=>{let{theme:t,color:a}=e;return t.colors[a]})),f=e=>r.default.createElement(u,null,r.default.createElement(c,(0,l.default)({width:"20",height:"23",viewBox:"0 0 20 23",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.02477 14.7513C8.65865 17.0594 11.6046 18.6059 17.5596 18.8856C18.6836 18.9384 19.5976 19.8435 19.5976 20.9688V20.9688C19.5976 22.0941 18.6841 23.0125 17.5599 22.9643C10.9409 22.6805 6.454 20.9387 3.75496 17.1258C0.937988 13.1464 0.486328 7.39309 0.486328 0.593262H4.50974C4.50974 7.54693 5.06394 11.9813 7.02477 14.7513Z",fill:"#D9D8FF"})));f.defaultProps={fill:"primary200"},f.propTypes={fill:o.default.string};var p=(0,r.memo)(f);t.default=p},96630:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=y(t);if(a&&a.has(e))return a.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}n.default=e,a&&a.set(e,n);return n}(a(53547)),r=n(a(45697)),o=a(46458),i=a(94117),s=a(9524),d=a(33483),u=n(a(78384)),c=n(a(27361)),f=a(97132),p=a(63376),m=a(12037),g=a(38178);function y(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(y=function(e){return e?a:t})(e)}const b=window&&window.strapi&&window.strapi.isEE?a(70398).Z:a(7434).Z,v=(0,u.default)(s.Stack).withConfig({displayName:"GlobalActions__CenteredStack",componentId:"sc-1vxwsjr-0"})(["align-items:center;justify-content:center;width:",";flex-shrink:0;"],m.cellWidth),h=e=>{let{actions:t,isFormDisabled:a,kind:n}=e;const{formatMessage:r}=(0,f.useIntl)(),{modifiedData:u,onChangeCollectionTypeGlobalActionCheckbox:y}=(0,p.usePermissionsDataManager)(),h=(0,l.useMemo)((()=>(0,g.findDisplayedActions)(t)),[t]),C=(0,l.useMemo)((()=>(0,g.getCheckboxesState)(h,u[n])),[u,h,n]);return l.default.createElement(i.Box,{paddingBottom:4,paddingTop:6,style:{paddingLeft:m.firstRowWidth}},l.default.createElement(s.Stack,{horizontal:!0,spacing:0},h.map((e=>{let{label:t,actionId:i}=e;return l.default.createElement(v,{key:i,spacing:3},l.default.createElement(d.Typography,{variant:"sigma",textColor:"neutral500"},r({id:`Settings.roles.form.permissions.${t.toLowerCase()}`,defaultMessage:t})),l.default.createElement(o.BaseCheckbox,{disabled:a||b,onValueChange:e=>{y(n,i,e)},name:i,"aria-label":r({id:"Settings.permissions.select-all-by-permission",defaultMessage:"Select all {label} permissions"},{label:r({id:`Settings.roles.form.permissions.${t.toLowerCase()}`,defaultMessage:t})}),value:(0,c.default)(C,[i,"hasAllActionsSelected"],!1),indeterminate:(0,c.default)(C,[i,"hasSomeActionsSelected"],!1)}))}))))};h.defaultProps={actions:[]},h.propTypes={actions:r.default.arrayOf(r.default.shape({label:r.default.string.isRequired,actionId:r.default.string.isRequired,subjects:r.default.array.isRequired})),isFormDisabled:r.default.bool.isRequired,kind:r.default.string.isRequired};var C=(0,l.memo)(h);t.default=C},7434:function(e,t){t.Z=void 0;t.Z=true},34169:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=e=>e.filter((e=>{let{subjects:t}=e;return t&&t.length}));t.default=a},25554:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.getRelatedActionIdData=t.getActionsIds=t.default=void 0;var n=a(96486),l=a(89362);const r=e=>e.map((e=>{let{actionId:t}=e;return t}));t.getActionsIds=r;const o=(e,t)=>e.reduce(((e,a)=>(Object.keys(t).forEach((r=>{const o=(0,n.get)(t,[r,a],{}),i={[r]:(0,l.removeConditionKeyFromData)(o)};e[a]?e[a]={...e[a],...i}:e[a]=i})),e)),{});t.getRelatedActionIdData=o;var i=(e,t)=>{const a=r(e),n=o(a,t);return Object.keys(n).reduce(((e,t)=>(e[t]=(0,l.getCheckboxState)(n[t]),e)),{})};t.default=i},38178:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"findDisplayedActions",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"getCheckboxesState",{enumerable:!0,get:function(){return r.default}});var l=n(a(34169)),r=n(a(25554))},7457:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(78384)),r=a(12037);var o=l.default.div.withConfig({displayName:"HiddenAction",componentId:"sc-uuwuy1-0"})(["width:",";"],r.cellWidth);t.default=o},15102:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(53547)),r=n(a(45697)),o=a(66592);const i=e=>{let{children:t,value:a}=e;return l.default.createElement(o.PermissionsDataManagerContext.Provider,{value:a},t)};i.propTypes={children:r.default.node.isRequired,value:r.default.exact({availableConditions:r.default.array.isRequired,modifiedData:r.default.object.isRequired,onChangeCollectionTypeLeftActionRowCheckbox:r.default.func.isRequired,onChangeConditions:r.default.func.isRequired,onChangeSimpleCheckbox:r.default.func.isRequired,onChangeParentCheckbox:r.default.func.isRequired,onChangeCollectionTypeGlobalActionCheckbox:r.default.func.isRequired}).isRequired};var s=i;t.default=s},74716:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=h(a(53547)),r=n(a(45697)),o=a(68547),i=a(1738),s=n(a(18721)),d=n(a(41609)),u=a(97132),c=n(a(65743)),f=n(a(15102)),p=n(a(3030)),m=n(a(65600)),g=h(a(96096)),y=n(a(47959)),b=n(a(77032));function v(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(v=function(e){return e?a:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=v(t);if(a&&a.has(e))return a.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,a&&a.set(e,n),n}const C=(0,l.forwardRef)(((e,t)=>{let{layout:a,isFormDisabled:n,permissions:r}=e;const[{initialData:v,layouts:h,modifiedData:C},E]=(0,l.useReducer)(g.default,g.initialState,(()=>(0,m.default)(a,r))),{formatMessage:O}=(0,u.useIntl)();(0,l.useImperativeHandle)(t,(()=>({getPermissions:()=>{const e={...(0,o.difference)(v.collectionTypes,C.collectionTypes),...(0,o.difference)(v.singleTypes,C.singleTypes)};let t;return t=!(0,d.default)(e)&&Object.values(e).some((e=>Object.values(e).some((e=>(0,s.default)(e,"conditions"))))),{permissionsToSend:(0,y.default)(C),didUpdateConditions:t}},resetForm:()=>{E({type:"RESET_FORM"})},setFormAfterSubmit:()=>{E({type:"SET_FORM_AFTER_SUBMIT"})}})));const k=(0,l.useCallback)((e=>{let{target:{name:t,value:a}}=e;E({type:"ON_CHANGE_SIMPLE_CHECKBOX",keys:t,value:a})}),[]),w=(0,l.useCallback)((e=>{let{target:{name:t,value:a}}=e;E({type:"ON_CHANGE_TOGGLE_PARENT_CHECKBOX",keys:t,value:a})}),[]);return l.default.createElement(f.default,{value:{availableConditions:a.conditions,modifiedData:C,onChangeConditions:e=>{E({type:"ON_CHANGE_CONDITIONS",conditions:e})},onChangeSimpleCheckbox:k,onChangeParentCheckbox:w,onChangeCollectionTypeLeftActionRowCheckbox:(e,t,a,n)=>{E({type:"ON_CHANGE_COLLECTION_TYPE_ROW_LEFT_CHECKBOX",pathToCollectionType:e,propertyName:t,rowName:a,value:n})},onChangeCollectionTypeGlobalActionCheckbox:(e,t,a)=>{E({type:"ON_CHANGE_COLLECTION_TYPE_GLOBAL_ACTION_CHECKBOX",collectionTypeKind:e,actionId:t,value:a})}}},l.default.createElement(i.TabGroup,{id:"tabs",label:O({id:"Settings.permissions.users.tabs.label",defaultMessage:"Tabs Permissions"})},l.default.createElement(i.Tabs,null,b.default.map((e=>l.default.createElement(i.Tab,{key:e.id},O({id:e.labelId,defaultMessage:e.defaultMessage}))))),l.default.createElement(i.TabPanels,{style:{position:"relative"}},l.default.createElement(i.TabPanel,null,l.default.createElement(c.default,{layout:h.collectionTypes,kind:"collectionTypes",isFormDisabled:n})),l.default.createElement(i.TabPanel,null,l.default.createElement(c.default,{layout:h.singleTypes,kind:"singleTypes",isFormDisabled:n})),l.default.createElement(i.TabPanel,null,l.default.createElement(p.default,{layout:h.plugins,kind:"plugins",isFormDisabled:n})),l.default.createElement(i.TabPanel,null,l.default.createElement(p.default,{layout:h.settings,kind:"settings",isFormDisabled:n})))))}));C.defaultProps={permissions:[],layout:{conditions:[],sections:{collectionTypes:{},singleTypes:{actions:[]},settings:[],plugins:[]}}},C.propTypes={layout:r.default.object,isFormDisabled:r.default.bool.isRequired,permissions:r.default.array};var E=(0,l.memo)(C);t.default=E},65600:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(83606)),r=n(a(91872)),o=n(a(86203));var i=(e,t)=>{const{conditions:a,sections:{collectionTypes:n,singleTypes:i,plugins:s,settings:d}}=e,u={collectionTypes:n,singleTypes:i,plugins:(0,o.default)(s,"plugin"),settings:(0,o.default)(d,"category")},c={collectionTypes:(0,l.default)(n,n.actions||[],a,t),singleTypes:(0,l.default)(i,i.actions||[],a,t),plugins:(0,r.default)(u.plugins,a,t),settings:(0,r.default)(u.settings,a,t)};return{initialData:c,modifiedData:c,layouts:u}};t.default=i},96096:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=t.default=void 0;var l=n(a(66312)),r=a(96486),o=n(a(88879)),i=n(a(45504));t.initialState={initialData:{},modifiedData:{},layouts:{}};var s=(e,t)=>(0,l.default)(e,(a=>{switch(t.type){case"ON_CHANGE_COLLECTION_TYPE_GLOBAL_ACTION_CHECKBOX":{const{collectionTypeKind:n,actionId:l,value:o}=t,s=["modifiedData",n];Object.keys((0,r.get)(e,s)).forEach((t=>{const n=(0,r.get)(e,[...s,t,l],void 0);if(n){let e=(0,i.default)(n,o);if(!o&&e.conditions){const t=(0,i.default)(e.conditions,!1);e={...e,conditions:t}}(0,r.set)(a,[...s,t,l],e)}}));break}case"ON_CHANGE_COLLECTION_TYPE_ROW_LEFT_CHECKBOX":{const{pathToCollectionType:n,propertyName:l,rowName:s,value:d}=t;let u=(0,r.cloneDeep)(e.modifiedData);const c=n.split(".."),f=(0,r.get)(u,c,{});Object.keys(f).forEach((e=>{if((0,r.has)(f[e],`properties.${l}`)){const t=(0,r.get)(f,[e,"properties",l,s]),a=[...c,e,"properties",l,s];if((0,r.isObject)(t)){const e=(0,i.default)(t,d);(0,r.set)(u,a,e)}else(0,r.set)(u,a,d)}})),d||(u=(0,o.default)(u)),(0,r.set)(a,"modifiedData",u);break}case"ON_CHANGE_CONDITIONS":Object.entries(t.conditions).forEach((e=>{const[t,n]=e;(0,r.set)(a,["modifiedData",...t.split(".."),"conditions"],n)}));break;case"ON_CHANGE_SIMPLE_CHECKBOX":{let n=(0,r.cloneDeep)(e.modifiedData);(0,r.set)(n,[...t.keys.split("..")],t.value),t.value||(n=(0,o.default)(n)),(0,r.set)(a,"modifiedData",n);break}case"ON_CHANGE_TOGGLE_PARENT_CHECKBOX":{const{keys:n,value:l}=t,s=[...n.split("..")];let d=(0,r.cloneDeep)(e.modifiedData);const u=(0,r.get)(d,s,{}),c=(0,i.default)(u,l);(0,r.set)(d,s,c),l||(d=(0,o.default)(d)),(0,r.set)(a,["modifiedData"],d);break}case"RESET_FORM":a.modifiedData=e.initialData;break;case"SET_FORM_AFTER_SUBMIT":a.initialData=e.modifiedData;break;default:return a}}));t.default=s},12037:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.rowHeight=t.firstRowWidth=t.cellWidth=void 0;t.cellWidth="7.5rem";t.firstRowWidth="12.5rem";t.rowHeight="3.3125rem"},83606:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.findLayouts=t.default=t.createDefaultPropertyForms=t.createDefaultPropertiesForm=t.createDefaultConditionsForm=void 0;var l=a(96486),r=n(a(19010));const o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.reduce(((e,a)=>(e[a.id]=-1!==t.indexOf(a.id),e)),{})};t.createDefaultConditionsForm=o;const i=function(e,t){let{children:a}=e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return a.reduce(((e,a)=>{if(a.children)return{...e,[a.value]:i(a,t,`${n}${a.value}.`)};const l=-1!==t.indexOf(`${n}${a.value}`);return e[a.value]=l,e}),{})};t.createDefaultPropertyForms=i;const s=(e,t,a)=>e.reduce(((e,n)=>{const r=t.properties.find((e=>{let{value:t}=e;return t===n}));if(r){const t=(0,l.get)(a,["properties",r.value],[]),o=i(r,t);e.properties[n]=o}return e}),{properties:{}});t.createDefaultPropertiesForm=s;const d=(e,t)=>t.reduce(((t,a)=>{const n=e.find((e=>{let{uid:t}=e;return t===a}))||null;return n&&(t[a]=n),t}),{});t.findLayouts=d;var u=function(e,t,a){let{subjects:n}=e,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return t.reduce(((e,t)=>{const u=t.subjects,c=d(n,u);if((0,l.isEmpty)(c))return e;const f=Object.keys(c).reduce(((e,n)=>{const{actionId:d,applyToProperties:u}=t,f=c[n].properties.map((e=>{let{value:t}=e;return t})).every((e=>-1===(u||[]).indexOf(e))),p=(0,r.default)(i,d,n),m=o(a,(0,l.get)(p,"conditions",[]));if((0,l.isEmpty)(u)||f)return(0,l.set)(e,[n,d],{properties:{enabled:void 0!==p},conditions:m}),e;const g=s(u,c[n],p);return(0,l.set)(e,[n,d],{...g,conditions:m}),e}),{});return(0,l.merge)(e,f)}),{})};t.default=u},91872:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.createSubCategoryForm=t.createChildrenDefaultForm=void 0;var l=a(96486),r=a(83606),o=n(a(19010));const i=(e,t,a)=>e.reduce(((e,n)=>{const i=(0,o.default)(a,n.action,null);return e[n.action]={properties:{enabled:void 0!==i},conditions:(0,r.createDefaultConditionsForm)(t,(0,l.get)(i,"conditions",[]))},e}),{});t.createSubCategoryForm=i;const s=(e,t,a)=>e.reduce(((e,n)=>(e[n.subCategoryId]=i(n.actions,t,a),e)),{});t.createChildrenDefaultForm=s;var d=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e.reduce(((e,n)=>{let{categoryId:l,childrenForm:r}=n;const o=s(r,t,a);return e[l]=o,e}),{})};t.default=d},19010:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(e,t,a)=>e.find((e=>e.action===t&&e.subject===a));t.default=a},9346:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.createPropertyArray=t.createPermissionWithProperties=void 0;var n=a(96486),l=a(89362),r=a(49896);const o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object.entries(e).reduce(((e,a)=>{const[l,r]=a;return(0,n.isObject)(r)?[...e,...o(r,`${t}${l}.`)]:(r&&!(0,n.isObject)(r)&&e.push(`${t}${l}`),e)}),[])};t.createPropertyArray=o;const i=(e,t,a)=>{let{conditions:n,properties:l}=a;return Object.entries(l).reduce(((e,t)=>{const[a,n]=t;return e.properties[a]=o(n),e}),{action:e,subject:t,conditions:(0,r.createConditionsArray)(n),properties:{}})};t.createPermissionWithProperties=i;const s=(e,t)=>{const a=Object.entries(t).reduce(((t,a)=>{const[o,s]=a;if(!(0,l.createArrayOfValues)(s).some((e=>e)))return t;if(!(0,n.has)(s,"properties.enabled")){const a=i(o,e,s);return[...t,a]}if(!s.properties.enabled)return t;const d=((e,t,a)=>{let{conditions:n}=a;return{action:e,subject:t,properties:{},conditions:(0,r.createConditionsArray)(n)}})(o,e,s);return t.push(d),t}),[]);return a};var d=e=>Object.entries(e).reduce(((e,t)=>{const[a,n]=t;return[...e,...s(a,n)]}),[]);t.default=d},86203:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(96486);const l=e=>e.split(" ").join("-");var r=(e,t)=>(0,n.chain)(e).groupBy(t).map(((e,t)=>({category:t,categoryId:l(t),childrenForm:(0,n.chain)(e).groupBy("subCategory").map(((e,t)=>({subCategoryName:t,subCategoryId:l(t),actions:e}))).value()}))).value();t.default=r},47959:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(9346)),r=n(a(49896));var o=e=>[...(0,r.default)(e.plugins),...(0,r.default)(e.settings),...(0,l.default)(e.collectionTypes),...(0,l.default)(e.singleTypes)];t.default=o},49896:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.createPermissionsArrayFromCategory=t.createPermission=t.createConditionsArray=void 0;const a=e=>Object.entries(e).filter((e=>{let[,t]=e;return t})).map((e=>{let[t]=e;return t}));t.createConditionsArray=a;const n=e=>{const[t,{conditions:n}]=e;return{action:t,subject:null,conditions:a(n),properties:{}}};t.createPermission=n;const l=e=>Object.values(e).reduce(((e,t)=>[...e,...Object.entries(t).reduce(((e,t)=>{const[,{properties:{enabled:a}}]=t;if(!a)return e;const l=n(t);return e.push(l),e}),[])]),[]);t.createPermissionsArrayFromCategory=l;var r=e=>Object.values(e).reduce(((e,t)=>[...e,...l(t)]),[]);t.default=r},77032:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=[{labelId:"app.components.LeftMenuLinkContainer.collectionTypes",defaultMessage:"Collection Types",id:"collectionTypes"},{labelId:"app.components.LeftMenuLinkContainer.singleTypes",id:"singleTypes",defaultMessage:"Single Types"},{labelId:"app.components.LeftMenuLinkContainer.plugins",defaultMessage:"Plugins",id:"plugins"},{labelId:"app.components.LeftMenuLinkContainer.settings",defaultMessage:"Settings",id:"settings"}];t.default=a},88879:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(96486),l=a(89362);const r=e=>Object.keys(e).reduce(((t,a)=>{const o=e[a];if((0,n.isObject)(o)&&!(0,n.has)(o,"conditions"))return{...t,[a]:r(o)};if((0,n.isObject)(o)&&(0,n.has)(o,"conditions")){if(!(0,l.createArrayOfValues)((0,n.omit)(o,"conditions")).some((e=>e))){const e=Object.keys(o.conditions).reduce(((e,t)=>(e[t]=!1,e)),{});return{...t,[a]:{...o,conditions:e}}}}return t[a]=o,t}),{});var o=r;t.default=o},45504:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(96486);const l=(e,t)=>Object.keys(e).reduce(((a,r)=>{const o=e[r];return"conditions"===r?(a[r]=o,a):(0,n.isObject)(o)?{...a,[r]:l(o,t)}:(a[r]=t,a)}),{});var r=l;t.default=r},90240:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=c(t);if(a&&a.has(e))return a.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}n.default=e,a&&a.set(e,n);return n}(a(53547)),r=n(a(45697)),o=a(47949),i=a(94117),s=n(a(11700)),d=a(97132),u=n(a(73009));function c(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(c=function(e){return e?a:t})(e)}const f=e=>{let{childrenForm:t,kind:a,name:n,isOpen:r,isFormDisabled:c,isWhite:f,onOpenCategory:p,pathToData:m}=e;const{formatMessage:g}=(0,d.useIntl)(),y=(0,l.useMemo)((()=>n.split("::").pop()),[n]);return l.default.createElement(o.Accordion,{expanded:r,onToggle:()=>{p(n)},id:`accordion-${n}`,variant:f?"primary":"secondary"},l.default.createElement(o.AccordionToggle,{title:(0,s.default)(y),description:`${g({id:"Settings.permissions.category"},{category:y})} ${"plugins"===a?"plugin":a}`}),l.default.createElement(o.AccordionContent,null,l.default.createElement(i.Box,{padding:6},t.map((e=>{let{actions:t,subCategoryName:a,subCategoryId:n}=e;return l.default.createElement(u.default,{key:a,actions:t,categoryName:y,isFormDisabled:c,subCategoryName:a,pathToData:[...m,n]})})))))};f.defaultProps={},f.propTypes={childrenForm:r.default.array.isRequired,isOpen:r.default.bool.isRequired,isFormDisabled:r.default.bool.isRequired,isWhite:r.default.bool.isRequired,kind:r.default.string.isRequired,name:r.default.string.isRequired,onOpenCategory:r.default.func.isRequired,pathToData:r.default.array.isRequired};var p=f;t.default=p},73009:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}n.default=e,a&&a.set(e,n);return n}(a(53547)),r=n(a(78384)),o=n(a(45697)),i=a(39272),s=a(94117),d=a(43499),u=a(40264),c=a(33483),f=a(97132),p=n(a(27361)),m=a(63376),g=a(89362),y=n(a(30380)),b=n(a(47173)),v=a(54972);function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:t})(e)}const C=window&&window.strapi&&window.strapi.isEE?a(42391).Z:a(92534).Z,E=r.default.div.withConfig({displayName:"SubCategory__Border",componentId:"sc-akgczm-0"})(["flex:1;align-self:center;border-top:1px solid ",";"],(e=>{let{theme:t}=e;return t.colors.neutral150})),O=r.default.div.withConfig({displayName:"SubCategory__CheckboxWrapper",componentId:"sc-akgczm-1"})(["position:relative;word-break:keep-all;",""],(e=>{let{hasConditions:t,disabled:a,theme:n}=e;return t&&`\n    &:before {\n      content: '';\n      position: absolute;\n      top: -0.25rem;\n      left: -0.5rem;\n      width: 0.375rem;\n      height: 0.375rem;\n      border-radius: 1.25rem;\n      background: ${a?n.colors.neutral100:n.colors.primary600};\n    }\n  `})),k=e=>{let{categoryName:t,isFormDisabled:a,subCategoryName:n,actions:r,pathToData:o}=e;const[h,k]=(0,l.useState)(!1),{modifiedData:w,onChangeParentCheckbox:M,onChangeSimpleCheckbox:_}=(0,m.usePermissionsDataManager)(),{formatMessage:j}=(0,f.useIntl)(),P=(0,p.default)(w,o,{}),T=(0,l.useMemo)((()=>Object.keys(P).reduce(((e,t)=>(e[t]=(0,g.removeConditionKeyFromData)(P[t]),e)),{})),[P]),{hasAllActionsSelected:x,hasSomeActionsSelected:D}=(0,g.getCheckboxState)(T),R=()=>{k((e=>!e))},S=(0,v.formatActions)(r,w,o),A=(0,v.getConditionsButtonState)((0,p.default)(w,[...o],{}));return l.default.createElement(l.default.Fragment,null,l.default.createElement(s.Box,null,l.default.createElement(u.Flex,{justifyContent:"space-between",alignItems:"center"},l.default.createElement(s.Box,{paddingRight:4},l.default.createElement(c.Typography,{variant:"sigma",textColor:"neutral600"},n)),l.default.createElement(E,null),l.default.createElement(s.Box,{paddingLeft:4},l.default.createElement(d.Checkbox,{name:o.join(".."),disabled:a||C,onValueChange:e=>{M({target:{name:o.join(".."),value:e}})},indeterminate:D,value:x},j({id:"app.utils.select-all",defaultMessage:"Select all"})))),l.default.createElement(u.Flex,{paddingTop:6,paddingBottom:6},l.default.createElement(i.Grid,{gap:2,style:{flex:1}},S.map((e=>{let{checkboxName:t,value:n,action:r,displayName:o,hasConditions:s}=e;return l.default.createElement(i.GridItem,{col:3,key:r},l.default.createElement(O,{disabled:a||C,hasConditions:s},l.default.createElement(d.Checkbox,{name:t,disabled:a||C,onValueChange:e=>{_({target:{name:t,value:e}})},value:n},o)))}))),l.default.createElement(y.default,{hasConditions:A,onClick:R}))),h&&l.default.createElement(b.default,{headerBreadCrumbs:[t,n],actions:S,isFormDisabled:a,onClosed:()=>{k(!1)},onToggle:R}))};k.propTypes={actions:o.default.array.isRequired,categoryName:o.default.string.isRequired,isFormDisabled:o.default.bool.isRequired,subCategoryName:o.default.string.isRequired,pathToData:o.default.array.isRequired};var w=k;t.default=w},92534:function(e,t){t.Z=void 0;t.Z=true},63806:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(96486),l=a(89362);var r=(e,t,a)=>e.map((e=>{const r=[...a,e.action,"properties","enabled"],o=(0,n.get)(t,r,!1),i=(0,n.get)(t,[...a,e.action,"conditions"],{}),s=(0,l.createArrayOfValues)(i).some((e=>e));return{...e,isDisplayed:o,checkboxName:r.join(".."),hasSomeActionsSelected:o,value:o,hasConditions:s,label:e.displayName,actionId:e.action,pathToConditionsObject:[...a,e.action]}}));t.default=r},25236:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(89362);var l=e=>{const t=Object.entries(e).reduce(((e,t)=>{const[a,{conditions:n}]=t;return e[a]=n,e}),{});return(0,n.createArrayOfValues)(t).some((e=>e))};t.default=l},54972:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"formatActions",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"getConditionsButtonState",{enumerable:!0,get:function(){return r.default}});var l=n(a(63806)),r=n(a(25236))},3030:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=s(t);if(a&&a.has(e))return a.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}n.default=e,a&&a.set(e,n);return n}(a(53547)),r=n(a(45697)),o=a(94117),i=n(a(90240));function s(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(s=function(e){return e?a:t})(e)}const d=e=>{let{isFormDisabled:t,kind:a,layout:n}=e;const[r,s]=(0,l.useState)(null),d=e=>{s(e===r?null:e)};return l.default.createElement(o.Box,{padding:6,background:"neutral0"},n.map(((e,n)=>{let{category:o,categoryId:s,childrenForm:u}=e;return l.default.createElement(i.default,{key:o,childrenForm:u,kind:a,isFormDisabled:t,isOpen:r===o,isWhite:n%2===1,name:o,onOpenCategory:d,pathToData:[a,s]})})))};d.propTypes={isFormDisabled:r.default.bool.isRequired,kind:r.default.string.isRequired,layout:r.default.arrayOf(r.default.shape({category:r.default.string.isRequired,categoryId:r.default.string.isRequired,childrenForm:r.default.arrayOf(r.default.shape({actions:r.default.array.isRequired})).isRequired}).isRequired).isRequired};var u=d;t.default=u},92395:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(53547));const r=n(a(78384)).default.span.withConfig({displayName:"RequiredSign__Required",componentId:"sc-13rz75o-0"})(["color:",";padding-left:","px;"],(e=>{let{theme:t}=e;return t.colors.danger700}),(e=>{let{theme:t}=e;return t.spaces[1]}));var o=()=>l.default.createElement(r,null,"*");t.default=o},43148:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(67154)),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=g(t);if(a&&a.has(e))return a.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}n.default=e,a&&a.set(e,n);return n}(a(53547)),o=n(a(45697)),i=a(46458),s=a(94117),d=a(40264),u=a(33483),c=n(a(11700)),f=a(97132),p=n(a(21950)),m=a(12037);function g(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(g=function(e){return e?a:t})(e)}const y=e=>{let{children:t,isCollapsable:a,isActive:n,isFormDisabled:o,label:g,onChange:y,onClick:b,checkboxName:v,someChecked:h,value:C}=e;const{formatMessage:E}=(0,f.useIntl)();return r.default.createElement(d.Flex,{alignItems:"center",paddingLeft:6,style:{width:m.firstRowWidth,flexShrink:0}},r.default.createElement(s.Box,{paddingRight:2},r.default.createElement(i.BaseCheckbox,{name:v,"aria-label":E({id:"Settings.permissions.select-all-by-permission",defaultMessage:"Select all {label} permissions"},{label:g}),disabled:o,onValueChange:e=>y({target:{name:v,value:e}}),indeterminate:h,value:C})),r.default.createElement(p.default,(0,l.default)({title:g,alignItems:"center",isCollapsable:a},a&&{onClick:b,"aria-expanded":n,onKeyDown:e=>{let{key:t}=e;return("Enter"===t||" "===t)&&b()},tabIndex:0,role:"button"}),r.default.createElement(u.Typography,{fontWeight:n?"bold":"",textColor:n?"primary600":"neutral800",ellipsis:!0},(0,c.default)(g)),t))};y.defaultProps={children:null,checkboxName:"",onChange:()=>{},value:!1,someChecked:!1,isCollapsable:!1},y.propTypes={checkboxName:o.default.string,children:o.default.node,label:o.default.string.isRequired,isCollapsable:o.default.bool,isFormDisabled:o.default.bool.isRequired,onChange:o.default.func,onClick:o.default.func.isRequired,someChecked:o.default.bool,value:o.default.bool,isActive:o.default.bool.isRequired};var b=(0,r.memo)(y);t.default=b},79793:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(96486);const l=e=>(0,n.isObject)(e)?(0,n.flattenDeep)(Object.values(e).map((e=>(0,n.isObject)(e)?l(e):e))):[];var r=l;t.default=r},18450:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(79793)),r=n(a(79634));var o=e=>{const t=(0,r.default)(e),a=(0,l.default)(t);if(!a.length)return{hasAllActionsSelected:!1,hasSomeActionsSelected:!1};const n=a.every((e=>e));return{hasAllActionsSelected:n,hasSomeActionsSelected:a.some((e=>e))&&!n}};t.default=o},89362:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"createArrayOfValues",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"getCheckboxState",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"removeConditionKeyFromData",{enumerable:!0,get:function(){return o.default}});var l=n(a(18450)),r=n(a(79793)),o=n(a(79634))},79634:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=e=>e?Object.keys(e).reduce(((t,a)=>("conditions"!==a&&(t[a]=e[a]),t)),{}):null;t.default=a},6648:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=()=>"todo empty role"},62799:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(67154)),r=n(a(53547)),o=n(a(45697)),i=a(94117),s=a(40264),d=a(43546),u=a(33483),c=a(49549),f=a(68547),p=a(97132);const m=e=>{let{id:t,name:a,description:n,usersCount:o,icons:m}=e;const{formatMessage:g}=(0,p.useIntl)(),y=g({id:"Roles.RoleRow.user-count",defaultMessage:"{number, plural, =0 {#  user} one {#  user} other {# users}}"},{number:o});return r.default.createElement(d.Tr,(0,l.default)({key:t},(0,f.onRowClick)({fn:m[1].onClick})),r.default.createElement(d.Td,{maxWidth:(0,f.pxToRem)(130)},r.default.createElement(u.Typography,{ellipsis:!0,textColor:"neutral800"},a)),r.default.createElement(d.Td,{maxWidth:(0,f.pxToRem)(250)},r.default.createElement(u.Typography,{ellipsis:!0,textColor:"neutral800"},n)),r.default.createElement(d.Td,null,r.default.createElement(u.Typography,{textColor:"neutral800"},y)),r.default.createElement(d.Td,null,r.default.createElement(s.Flex,(0,l.default)({justifyContent:"flex-end"},f.stopPropagation),m.map(((e,t)=>e?r.default.createElement(i.Box,{key:e.label,paddingLeft:0===t?0:1},r.default.createElement(c.IconButton,{onClick:e.onClick,label:e.label,noBorder:!0,icon:e.icon})):null)))))};m.propTypes={id:o.default.number.isRequired,name:o.default.string.isRequired,description:o.default.string.isRequired,usersCount:o.default.number.isRequired,icons:o.default.array.isRequired};var g=m;t.default=g},54463:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=k(t);if(a&&a.has(e))return a.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}n.default=e,a&&a.set(e,n);return n}(a(53547)),r=n(a(63852)),o=a(68547),i=n(a(89326)),s=n(a(62982)),d=n(a(56204)),u=n(a(54279)),c=a(64459),f=a(35395),p=a(43546),m=a(33483),g=a(80117),y=a(19631),b=a(97132),v=a(39711),h=n(a(62799)),C=n(a(6648)),E=n(a(78924)),O=a(63376);function k(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(k=function(e){return e?a:t})(e)}var w=()=>{const{formatMessage:e}=(0,b.useIntl)();(0,o.useFocusWhenNavigate)();const{sortedRoles:t,isLoading:a}=(()=>{const{roles:e,isLoading:t}=(0,O.useRolesList)(),a=(0,o.useQuery)(),n=decodeURIComponent(a.get("_q")||"");return{isLoading:t,sortedRoles:(0,r.default)(e,n,{keys:["name","description"]})}})(),{isModalOpen:n,handleToggle:k,handleToggleModalForCreatingRole:w,getIcons:M}=(()=>{const{formatMessage:e}=(0,b.useIntl)(),[t,a]=(0,l.useState)(!1),{trackUsage:n}=(0,o.useTracking)(),{push:r}=(0,v.useHistory)(),i=(0,l.useCallback)((e=>{r(`/settings/roles/${e}`)}),[r]),c=(0,l.useCallback)((()=>{a((e=>!e))}),[]),f=(0,l.useCallback)((()=>{n("didShowRBACUpgradeModal"),a(!0)}),[n]),p=(0,l.useCallback)((t=>[{onClick:c,label:e({id:"app.utils.duplicate",defaultMessage:"Duplicate"}),icon:l.default.createElement(u.default,null)},{onClick:()=>i(t.id),label:e({id:"app.utils.edit",defaultMessage:"Edit"}),icon:l.default.createElement(d.default,null)},{onClick:c,label:e({id:"global.delete",defaultMessage:"Delete"}),icon:l.default.createElement(s.default,null)}]),[e,c,i]);return{isModalOpen:t,handleToggleModalForCreatingRole:f,handleToggle:c,getIcons:p}})(),_=t.length+1;return l.default.createElement(g.Main,null,l.default.createElement(o.SettingsPageTitle,{name:"Roles"}),l.default.createElement(f.HeaderLayout,{primaryAction:l.default.createElement(c.Button,{onClick:w,startIcon:l.default.createElement(i.default,null),size:"L"},e({id:"Settings.roles.list.button.add",defaultMessage:"Add new role"})),title:e({id:"global.roles",defaultMessage:"roles"}),subtitle:e({id:"Settings.roles.list.description",defaultMessage:"List of roles"})}),l.default.createElement(f.ContentLayout,null,l.default.createElement(p.Table,{colCount:5,rowCount:_,footer:l.default.createElement(p.TFooter,{onClick:w,icon:l.default.createElement(i.default,null)},e({id:"Settings.roles.list.button.add",defaultMessage:"Add new role"}))},l.default.createElement(p.Thead,null,l.default.createElement(p.Tr,null,l.default.createElement(p.Th,null,l.default.createElement(m.Typography,{variant:"sigma",textColor:"neutral600"},e({id:"global.name",defaultMessage:"Name"}))),l.default.createElement(p.Th,null,l.default.createElement(m.Typography,{variant:"sigma",textColor:"neutral600"},e({id:"global.description",defaultMessage:"Description"}))),l.default.createElement(p.Th,null,l.default.createElement(m.Typography,{variant:"sigma",textColor:"neutral600"},e({id:"global.users",defaultMessage:"Users"}))),l.default.createElement(p.Th,null,l.default.createElement(y.VisuallyHidden,null,e({id:"global.actions",defaultMessage:"Actions"}))))),l.default.createElement(p.Tbody,null,null===t||void 0===t?void 0:t.map((e=>l.default.createElement(h.default,{key:e.id,id:e.id,name:e.name,description:e.description,usersCount:e.usersCount,icons:M(e)}))))),!_&&!a&&l.default.createElement(C.default,null)),l.default.createElement(E.default,{isOpen:n,onClose:k}))};t.default=w},19160:function(e,t,a){var n=a(95318);t.Z=void 0;var l=n(a(53547)),r=a(68547),o=n(a(13240)),i=n(a(54463));var s=()=>l.default.createElement(r.CheckPagePermissions,{permissions:o.default.settings.roles.main},l.default.createElement(i.default,null));t.Z=s},21609:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(94654)),r=a(26595);var o=e=>(0,l.default)(e,(e=>e.links)).map((e=>(0,r.createRoute)(e.Component,e.to,e.exact||!1)));t.default=o},2971:function(e,t){t.Z=void 0;var a=[];t.Z=a},1514:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const n=window&&window.strapi&&window.strapi.isEE?a(58556).ZP:a(7126).Z,l=window&&window.strapi&&window.strapi.isEE?a(96734).Z:a(19160).Z;var r=[{Component:()=>({default:l}),to:"/settings/roles",exact:!0},{Component:()=>({default:n}),to:"/settings/roles/duplicate/:id",exact:!0},{Component:()=>({default:n}),to:"/settings/roles/new",exact:!0},{Component:async()=>await a.e(2544).then(a.bind(a,19144)),to:"/settings/roles/:id",exact:!0},{Component:async()=>await a.e(5199).then(a.bind(a,42222)),to:"/settings/users",exact:!0},{Component:async()=>await a.e(4263).then(a.bind(a,20262)),to:"/settings/users/:id",exact:!0},{Component:async()=>await Promise.all([a.e(8252),a.e(5162)]).then(a.bind(a,39616)),to:"/settings/webhooks/create",exact:!0},{Component:async()=>await Promise.all([a.e(8252),a.e(5162)]).then(a.bind(a,56454)),to:"/settings/webhooks/:id",exact:!0},{Component:async()=>await a.e(4121).then(a.bind(a,94859)),to:"/settings/webhooks",exact:!0},{Component:async()=>await a.e(8056).then(a.bind(a,76796)),to:"/settings/api-tokens",exact:!0},{Component:async()=>await a.e(4299).then(a.bind(a,3441)),to:"/settings/api-tokens/create",exact:!0},{Component:async()=>await a.e(92).then(a.bind(a,70593)),to:"/settings/api-tokens/:id",exact:!0}];t.default=r},56147:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=e=>e.filter((e=>!e.links.every((e=>!1===e.isDisplayed))));t.default=a},77040:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"createSectionsRoutes",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"getSectionsToDisplay",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"routes",{enumerable:!0,get:function(){return o.default}});var l=n(a(21609)),r=n(a(56147)),o=n(a(53197))},53197:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(1514));var r=[...window&&window.strapi&&window.strapi.isEE?a(5007).Z:a(2971).Z,...l.default];t.default=r},58556:function(e,t,a){var n=a(25108),l=a(95318);t.ZP=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=x(t);if(a&&a.has(e))return a.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}n.default=e,a&&a.set(e,n);return n}(a(53547)),o=l(a(30381)),i=a(68547),s=a(94117),d=a(64459),u=a(35395),c=a(39272),f=a(80117),p=a(56156),m=a(40264),g=a(9524),y=a(33483),b=a(99136),v=a(78607),h=l(a(87760)),C=a(80831),E=l(a(27361)),O=l(a(41609)),k=a(97132),w=a(39711),M=l(a(78384)),_=l(a(74716)),j=a(63376),P=l(a(13240)),T=l(a(21251));function x(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(x=function(e){return e?a:t})(e)}const D=M.default.div.withConfig({displayName:"CreatePage__UsersRoleNumber",componentId:"sc-f7k9id-0"})(["border:1px solid ",";background:",";padding:",";color:",";border-radius:",";font-size:","rem;font-width:bold;"],(e=>{let{theme:t}=e;return t.colors.primary200}),(e=>{let{theme:t}=e;return t.colors.primary100}),(e=>{let{theme:t}=e;return`${t.spaces[2]} ${t.spaces[4]}`}),(e=>{let{theme:t}=e;return t.colors.primary600}),(e=>{let{theme:t}=e;return t.borderRadius}),.75),R=()=>{const e=(0,i.useNotification)(),{lockApp:t,unlockApp:a}=(0,i.useOverlayBlocker)(),{formatMessage:l}=(0,k.useIntl)(),[M,P]=(0,r.useState)(!1),{replace:x}=(0,w.useHistory)(),R=(0,r.useRef)(),{trackUsage:S}=(0,i.useTracking)(),A=(0,w.useRouteMatch)("/settings/roles/duplicate/:id"),I=(0,E.default)(A,"params.id",null),{isLoading:F,data:q}=(0,j.useFetchPermissionsLayout)(),{permissions:N,isLoading:L}=(0,j.useFetchRole)(I),W=`${l({id:"Settings.roles.form.created",defaultMessage:"Created"})} ${(0,o.default)().format("LL")}`;return r.default.createElement(f.Main,null,r.default.createElement(i.SettingsPageTitle,{name:"Roles"}),r.default.createElement(C.Formik,{initialValues:{name:"",description:W},onSubmit:l=>{t(),P(!0),S(I?"willDuplicateRole":"willCreateNewRole"),Promise.resolve((0,i.request)("/admin/roles",{method:"POST",body:l})).then((async e=>{const{permissionsToSend:t}=R.current.getPermissions();return S(I?"didDuplicateRole":"didCreateNewRole"),e.data.id&&!(0,O.default)(t)&&await(0,i.request)(`/admin/roles/${e.data.id}/permissions`,{method:"PUT",body:{permissions:t}}),e})).then((t=>{P(!1),e({type:"success",message:{id:"Settings.roles.created",defaultMessage:"created"}}),x(`/settings/roles/${t.data.id}`)})).catch((t=>{n.error(t),P(!1),e({type:"warning",message:{id:"notification.error"}})})).finally((()=>{a()}))},validationSchema:T.default,validateOnChange:!1},(e=>{let{handleSubmit:t,values:a,errors:n,handleReset:o,handleChange:f}=e;return r.default.createElement(i.Form,{noValidate:!0},r.default.createElement(r.default.Fragment,null,r.default.createElement(u.HeaderLayout,{primaryAction:r.default.createElement(g.Stack,{horizontal:!0,spacing:2},r.default.createElement(d.Button,{variant:"secondary",onClick:()=>{o(),R.current.resetForm()},size:"L"},l({id:"app.components.Button.reset",defaultMessage:"Reset"})),r.default.createElement(d.Button,{onClick:t,loading:M,size:"L"},l({id:"global.save",defaultMessage:"Save"}))),title:l({id:"Settings.roles.create.title",defaultMessage:"Create a role"}),subtitle:l({id:"Settings.roles.create.description",defaultMessage:"Define the rights given to the role"}),navigationAction:r.default.createElement(p.Link,{startIcon:r.default.createElement(h.default,null),to:"/settings/roles"},l({id:"global.back",defaultMessage:"Back"}))}),r.default.createElement(u.ContentLayout,null,r.default.createElement(g.Stack,{spacing:6},r.default.createElement(s.Box,{background:"neutral0",padding:6,shadow:"filterShadow",hasRadius:!0},r.default.createElement(g.Stack,{spacing:4},r.default.createElement(m.Flex,{justifyContent:"space-between"},r.default.createElement(s.Box,null,r.default.createElement(s.Box,null,r.default.createElement(y.Typography,{fontWeight:"bold"},l({id:"global.details",defaultMessage:"Details"}))),r.default.createElement(s.Box,null,r.default.createElement(y.Typography,{variant:"pi",textColor:"neutral600"},l({id:"Settings.roles.form.description",defaultMessage:"Name and description of the role"})))),r.default.createElement(D,null,l({id:"Settings.roles.form.button.users-with-role",defaultMessage:"{number, plural, =0 {# users} one {# user} other {# users}} with this role"},{number:0}))),r.default.createElement(c.Grid,{gap:4},r.default.createElement(c.GridItem,{col:6},r.default.createElement(b.TextInput,{name:"name",error:n.name&&l({id:n.name}),label:l({id:"global.name",defaultMessage:"Name"}),onChange:f,value:a.name})),r.default.createElement(c.GridItem,{col:6},r.default.createElement(v.Textarea,{label:l({id:"global.description",defaultMessage:"Description"}),name:"description",error:n.description&&l({id:n.description}),onChange:f},a.description))))),F||L?r.default.createElement(s.Box,{background:"neutral0",padding:6,shadow:"filterShadow",hasRadius:!0},r.default.createElement(i.LoadingIndicatorPage,null)):r.default.createElement(s.Box,{shadow:"filterShadow",hasRadius:!0},r.default.createElement(_.default,{isFormDisabled:!1,ref:R,permissions:N,layout:q}))))))})))};t.ZP=()=>r.default.createElement(i.CheckPagePermissions,{permissions:P.default.settings.roles.create},r.default.createElement(R,null))},21251:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=r(t);if(a&&a.has(e))return a.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=l?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(a(53209)),l=a(68547);function r(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(r=function(e){return e?a:t})(e)}var o=n.object().shape({name:n.string().required(l.translatedErrors.required),description:n.string().required(l.translatedErrors.required)});t.default=o},6561:function(e,t){t.Z=void 0;t.Z=false},11720:function(e,t){t.Z=void 0;t.Z=false},48535:function(e,t){t.Z=void 0;t.Z=false},38706:function(e,t){t.Z=void 0;t.Z=false},70398:function(e,t){t.Z=void 0;t.Z=false},42391:function(e,t){t.Z=void 0;t.Z=false},33608:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=j(a(53547)),r=a(68547),o=n(a(89326)),i=n(a(62982)),s=n(a(54279)),d=n(a(56204)),u=a(64459),c=a(35395),f=a(19631),p=a(80117),m=a(43546),g=a(33483),y=a(96486),b=n(a(63852)),v=a(97132),h=a(39711),C=a(53777),E=a(63376),O=n(a(13240)),k=n(a(6648)),w=n(a(62799)),M=j(a(12717));function _(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(_=function(e){return e?a:t})(e)}function j(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=_(t);if(a&&a.has(e))return a.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,a&&a.set(e,n),n}var P=()=>{const{formatMessage:e}=(0,v.useIntl)(),{isLoadingForPermissions:t,canCreate:a,canRead:n,canDelete:_,canUpdate:j,isLoading:P,getData:T,sortedRoles:x}=(()=>{(0,r.useFocusWhenNavigate)();const{isLoading:e,allowedActions:{canCreate:t,canDelete:a,canRead:n,canUpdate:o}}=(0,r.useRBAC)(O.default.settings.roles),{getData:i,roles:s,isLoading:d}=(0,E.useRolesList)(!1),[{query:u}]=(0,r.useQueryParams)(),c=(null===u||void 0===u?void 0:u._q)||"",f=(0,b.default)(s,c,{keys:["name","description"]});return(0,l.useEffect)((()=>{!e&&n&&i()}),[e,n,i]),{isLoadingForPermissions:e,canCreate:t,canDelete:a,canRead:n,canUpdate:o,isLoading:d,getData:i,sortedRoles:f,roles:s}})(),{handleNewRoleClick:D,getIcons:R,isWarningDeleteAllOpened:S,showModalConfirmButtonLoading:A,handleToggleModal:I,handleDeleteData:F}=(e=>{let{getData:t,canCreate:a,canDelete:n,canUpdate:o}=e;const{formatMessage:u}=(0,v.useIntl)(),c=(0,r.useNotification)(),[f,p]=(0,l.useState)(!1),{push:m}=(0,h.useHistory)(),[{selectedRoles:g,showModalConfirmButtonLoading:b,roleToDelete:E},O]=(0,l.useReducer)(M.default,M.initialState),k=(0,l.useCallback)((e=>{m(`/settings/roles/duplicate/${e}`)}),[m]),w=(0,l.useCallback)((e=>{O({type:"SET_ROLE_TO_DELETE",id:e}),_()}),[]),_=()=>p((e=>!e)),j=(0,l.useCallback)((e=>{m(`/settings/roles/${e}`)}),[m]),P=(0,l.useCallback)(((e,t)=>{e.preventDefault(),e.stopPropagation(),t.usersCount?c({type:"info",message:{id:"Roles.ListPage.notification.delete-not-allowed"}}):w(t.id)}),[c,w]),T=(0,l.useCallback)(((e,t)=>{e.preventDefault(),e.stopPropagation(),k(t.id)}),[k]);return{handleNewRoleClick:()=>m("/settings/roles/new"),getIcons:(0,l.useCallback)((e=>[...a?[{onClick:t=>T(t,e),label:u({id:"app.utils.duplicate",defaultMessage:"Duplicate"}),icon:l.default.createElement(s.default,null)}]:[],...o?[{onClick:()=>j(e.id),label:u({id:"app.utils.edit",defaultMessage:"Edit"}),icon:l.default.createElement(d.default,null)}]:[],...n?[{onClick:t=>P(t,e),label:u({id:"global.delete",defaultMessage:"Delete"}),icon:l.default.createElement(i.default,null)}]:[]]),[u,P,T,j,a,o,n]),selectedRoles:g,isWarningDeleteAllOpened:f,showModalConfirmButtonLoading:b,handleToggleModal:_,handleDeleteData:async()=>{try{O({type:"ON_REMOVE_ROLES"}),await C.axiosInstance.post("/admin/roles/batch-delete",{ids:[E]}),await t(),O({type:"RESET_DATA_TO_DELETE"})}catch(e){const t=(0,y.get)(e,["response","payload","data","ids"],null);if(t&&Array.isArray(t)){const e=t.join("\n");c({type:"warning",message:e})}else c({type:"warning",message:{id:"notification.error"}})}_()}}})({getData:T,canCreate:a,canDelete:_,canUpdate:j}),q=x.length+1;if(t)return l.default.createElement(p.Main,null,l.default.createElement(r.LoadingIndicatorPage,null));const N=e({id:"global.roles",defaultMessage:"roles"});return l.default.createElement(p.Main,null,l.default.createElement(r.SettingsPageTitle,{name:"Roles"}),l.default.createElement(c.HeaderLayout,{primaryAction:a?l.default.createElement(u.Button,{onClick:D,startIcon:l.default.createElement(o.default,null),size:"L"},e({id:"Settings.roles.list.button.add",defaultMessage:"Add new role"})):null,title:N,subtitle:e({id:"Settings.roles.list.description",defaultMessage:"List of roles"}),as:"h2"}),n&&l.default.createElement(c.ActionLayout,{startActions:l.default.createElement(r.SearchURLQuery,{label:e({id:"app.component.search.label",defaultMessage:"Search for {target}"},{target:N})})}),n&&l.default.createElement(c.ContentLayout,null,l.default.createElement(m.Table,{colCount:6,rowCount:q,footer:a?l.default.createElement(m.TFooter,{onClick:D,icon:l.default.createElement(o.default,null)},e({id:"Settings.roles.list.button.add",defaultMessage:"Add new role"})):null},l.default.createElement(m.Thead,null,l.default.createElement(m.Tr,null,l.default.createElement(m.Th,null,l.default.createElement(g.Typography,{variant:"sigma",textColor:"neutral600"},e({id:"global.name",defaultMessage:"Name"}))),l.default.createElement(m.Th,null,l.default.createElement(g.Typography,{variant:"sigma",textColor:"neutral600"},e({id:"global.description",defaultMessage:"Description"}))),l.default.createElement(m.Th,null,l.default.createElement(g.Typography,{variant:"sigma",textColor:"neutral600"},e({id:"global.users",defaultMessage:"Users"}))),l.default.createElement(m.Th,null,l.default.createElement(f.VisuallyHidden,null,e({id:"global.actions",defaultMessage:"Actions"}))))),l.default.createElement(m.Tbody,null,null===x||void 0===x?void 0:x.map((e=>l.default.createElement(w.default,{key:e.id,id:e.id,name:e.name,description:e.description,usersCount:e.usersCount,icons:R(e)}))))),!q&&!P&&l.default.createElement(k.default,null)),l.default.createElement(r.ConfirmDialog,{isOpen:S,onConfirm:F,isConfirmButtonLoading:A,onToggleDialog:I}))};t.default=P},12717:function(e,t,a){var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=t.default=void 0;var l=n(a(66312));t.initialState={roleToDelete:null,showModalConfirmButtonLoading:!1,shouldRefetchData:!1};var r=(e,t)=>(0,l.default)(e,(e=>{switch(t.type){case"ON_REMOVE_ROLES":e.showModalConfirmButtonLoading=!0;break;case"ON_REMOVE_ROLES_SUCCEEDED":e.shouldRefetchData=!0,e.roleToDelete=null;break;case"RESET_DATA_TO_DELETE":e.shouldRefetchData=!1,e.roleToDelete=null,e.showModalConfirmButtonLoading=!1;break;case"SET_ROLE_TO_DELETE":e.roleToDelete=t.id;break;default:return e}}));t.default=r},96734:function(e,t,a){var n=a(95318);t.Z=void 0;var l=n(a(53547)),r=a(68547),o=n(a(13240)),i=n(a(33608));var s=()=>l.default.createElement(r.CheckPagePermissions,{permissions:o.default.settings.roles.main},l.default.createElement(i.default,null));t.Z=s},5007:function(e,t,a){t.Z=void 0;var n=[...strapi.features.isEnabled(strapi.features.SSO)?[{Component:async()=>await a.e(302).then(a.bind(a,66554)),to:"/settings/single-sign-on",exact:!0}]:[]];t.Z=n},12285:function(e,t,a){e.exports=a.p+"c3de6118ef47086ad05c.png"},31652:function(e,t,a){e.exports=a.p+"bd81ba6c07827282255d.png"}}]);